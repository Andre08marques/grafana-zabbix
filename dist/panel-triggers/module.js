define(["react","lodash","@grafana/ui","emotion","moment","@grafana/runtime","@grafana/data","app/plugins/sdk","app/core/utils/datemath","react-dom","app/core/utils/kbn"],(function(e,t,n,r,o,a,i,s,l,c,u){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=77)}([function(t,n){t.exports=e},function(e,n){e.exports=t},function(e,t,n){e.exports=n(73)()},function(e,t,n){"use strict";n.d(t,"t",(function(){return p})),n.d(t,"e",(function(){return f})),n.d(t,"f",(function(){return d})),n.d(t,"c",(function(){return h})),n.d(t,"r",(function(){return g})),n.d(t,"o",(function(){return v})),n.d(t,"k",(function(){return b})),n.d(t,"l",(function(){return E})),n.d(t,"i",(function(){return w})),n.d(t,"a",(function(){return P})),n.d(t,"d",(function(){return x})),n.d(t,"n",(function(){return C})),n.d(t,"q",(function(){return O})),n.d(t,"g",(function(){return S})),n.d(t,"s",(function(){return k})),n.d(t,"b",(function(){return N})),n.d(t,"h",(function(){return T})),n.d(t,"j",(function(){return _})),n.d(t,"p",(function(){return D})),n.d(t,"m",(function(){return j}));var r=n(1),o=n.n(r),a=n(9),i=n.n(a),s=n(20),l=n.n(s),c=n(4),u=n(5),p=/\$(\w+)|\[\[([\s\S]+?)(?::(\w+))?\]\]|\${(\w+)(?:\.([^:^\}]+))?(?::(\w+))?}/g;function f(e,t){for(var n,r,a,i,s,l=t.substring(t.indexOf("[")+1,t.lastIndexOf("]")),c=(n=l,r=[],a=!1,i=!1,s="",o.a.forEach(n,(function(e){'"'===e&&i?s+=e:'"'===e&&a?a=!1:'"'!==e||a?"["!==e||a?"]"!==e||a?","!==e||a||i?s+=e:(r.push(s),s=""):i=!1:i=!0:a=!0})),r.push(s),r),u=c.length;u>=1;u--)e=e.replace("$"+u,c[u-1]);return e}function d(e){return o.a.forEach(e,(function(e){return e.item=e.name,e.name=f(e.item,e.key_),e})),e}var m=/{\$[A-Z0-9_\.]+}/g;function h(e){return m.test(e)}function g(e,t,n){var r=n?e.url:e.name,a=r.match(m);return o.a.forEach(a,(function(a){var i=o.a.filter(t,(function(t){if(t.hostid){if(n){var r=!1;return o.a.forEach(e.hosts,(function(e){e.hostid===t.hostid&&(r=!0)})),r}return t.hostid===e.hostid}return!0})),s=o.a.find(i,{macro:a});if(s&&s.value){var l=s.value,c=new RegExp(function(e){return e=e.replace(/\$/,"\\$")}(a));r=r.replace(c,l)}})),r}function v(e){var t,n=[];o.a.each(function(e){var t;if(function(e){return/^\{.+\}$/.test(e)}(e)){var n=e.match(/\{[^\{\}]*\}|\{\/.*\/\}/g);t=o.a.map(n,(function(e){return o.a.trim(e,"{}")}))}else t=e.split(".");return t}(e),(function(e){"*"===e&&(e="/.*/"),n.push(e)}));var r=o.a.zipObject(["group","host","app","item"],n);switch(4===n.length&&"/.*/"===r.app&&(r.app=""),n.length){case 1:t=u.b.Group;break;case 2:t=u.b.Host;break;case 3:t=u.b.Application;break;case 4:t=u.b.Item}return{queryType:t,group:r.group||"",host:r.host||"",application:r.app||"",item:r.item||""}}var y=/^\/(.*)\/([gmi]*)$/m;function b(e){return y.test(e)}function E(e,t){if(/^\$\w+/.test(e)){var n=o.a.map(t,(function(e){return"$"+e.name}));return o.a.includes(n,e)}return!1}function w(e){var t=e.to.diff(e.from),n=Math.round(t/1e3),r=l.a.secondsToHms(t/1e3);return{__range_ms:{text:t,value:t},__range_s:{text:n,value:n},__range:{text:r,value:r},__range_series:{text:c.j,value:c.j}}}function P(e){var t=e.match(y),n=t[1],r=""!==t[2]?t[2]:void 0;return new RegExp(n,r)}function x(e){return e.replace(/[\\^$*+?.()|[\]{}\/]/g,"\\$&")}function C(e){var t=/(^[\d]+)(y|M|w|d|h|m|s)/g.exec(e);return i.a.duration(Number(t[1]),t[2]).valueOf()}function O(e){var t=/^([\+\-]*)([\d]+)(y|M|w|d|h|m|s)/g.exec(e);return"+"===t[1]?0-i.a.duration(Number(t[2]),t[3]).valueOf():i.a.duration(Number(t[2]),t[3]).valueOf()}function S(e){if(e.length){var t="<br><br>Acknowledges:<br><table><tr><td><b>Time</b></td><td><b>User</b></td><td><b>Comments</b></td></tr>";return o.a.each(o.a.map(e,(function(e){return"<tr><td><i>"+i.a.unix(e.clock).format("DD MMM YYYY HH:mm:ss")+"</i></td><td>"+e.alias+" ("+e.name+" "+e.surname+")</td><td>"+e.message+"</td></tr>"})),(function(e){t=t.concat(e)})),t=t.concat("</table>")}return""}function k(e){return function(t){for(var n=0;n<e.length;n++)t=e[n].call(this,t);return t}}function N(e){return e.replace(/\s+/g," ").trim()}function T(e,t){if(void 0===t&&(t=0),0===e.length)return 1;var n=e[0];return o.a.isArray(n)?T(n,t+1):t+1}function _(e){return!isNaN(parseFloat(e))&&isFinite(e)}function D(e){if(!e)return[];var t=o.a.map(e.split(","),(function(e){return e.trim()}));return t=o.a.map(t,(function(e){var t=e.split(":");return{tag:t[0].trim(),value:t[1].trim()}}))}function j(e){return e||[]}},function(e,t,n){"use strict";n.d(t,"m",(function(){return r})),n.d(t,"a",(function(){return o})),n.d(t,"f",(function(){return a})),n.d(t,"e",(function(){return i})),n.d(t,"h",(function(){return s})),n.d(t,"d",(function(){return l})),n.d(t,"i",(function(){return c})),n.d(t,"g",(function(){return u})),n.d(t,"k",(function(){return p})),n.d(t,"r",(function(){return f})),n.d(t,"q",(function(){return d})),n.d(t,"n",(function(){return m})),n.d(t,"o",(function(){return h})),n.d(t,"p",(function(){return g})),n.d(t,"l",(function(){return v})),n.d(t,"c",(function(){return y})),n.d(t,"j",(function(){return b})),n.d(t,"b",(function(){return E}));var r="alexanderzobnin-zabbix-triggers-panel",o=1,a=0,i=1,s=2,l=3,c=4,u=5,p=2,f=0,d=1,m=2,h=4,g=8,v=[{val:0,text:"Not classified"},{val:1,text:"Information"},{val:2,text:"Warning"},{val:3,text:"Average"},{val:4,text:"High"},{val:5,text:"Disaster"}],y=3600,b="range_series",E=1001},function(e,t,n){"use strict";var r,o;n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return o})),function(e){e.Group="group",e.Host="host",e.Application="application",e.Item="item",e.ItemValues="itemValues"}(r||(r={})),function(e){e.Problems="problems",e.Recent="recent",e.History="history"}(o||(o={}))},function(e,t){e.exports=n},function(e,t,n){var r;function o(e){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
                                                                                                                                                                                                                                                                                                                                                       Copyright (c) 2017 Jed Watson.
                                                                                                                                                                                                                                                                                                                                                       Licensed under the MIT License (MIT), see
                                                                                                                                                                                                                                                                                                                                                       http://jedwatson.github.io/classnames
                                                                                                                                                                                                                                                                                                                                                     */!function(){"use strict";var a={}.hasOwnProperty;function i(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=o(n);if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var s=i.apply(null,n);s&&e.push(s)}else if("object"===r)for(var l in n)a.call(n,l)&&n[l]&&e.push(l)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):"object"===o(n(43))&&n(43)?void 0===(r=function(){return i}.apply(t,[]))||(e.exports=r):window.classNames=i}()},function(e,t){e.exports=r},function(e,t){e.exports=o},function(e,t){e.exports=a},,,function(e,t,n){"use strict";n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return p})),n.d(t,"d",(function(){return f}));var r=n(1),o=n.n(r),a=n(9),i=n.n(a),s=n(3);function l(e,t){try{var n=s.n(t);return Date.now()-1e3*e.timestamp<n}catch(e){return!1}}var c="DD MMM YYYY HH:mm:ss";function u(e,t){var n=i.a.unix(e),r=t||c;return n.format(r)}var p=function(e){return o.a.find("ABCDEFGHIJKLMNOPQRSTUVWXYZ",(function(t){return o.a.every(e,(function(e){return e.refId!==t}))}))};function f(e,t){var n,r,o,a,i;return t&&Object.keys(t).length>0&&(e+="?"+(n=[],r=/\[\]$/,o=function(e){return"[object Array]"===Object.prototype.toString.call(e)},a=function(e,t){t="function"==typeof t?t():null===t?"":void 0===t?"":t,n[n.length]="boolean"!=typeof t?d(e,!0)+"="+d(t,!0):d(e,!0)},(i=function(e,t){var s,l,c;if(e)if(o(t))for(s=0,l=t.length;s<l;s++)r.test(e)?a(e,t[s]):i(e,t[s]);else if(t&&"[object Object]"===String(t))for(c in t)i(e+"["+c+"]",t[c]);else a(e,t);else if(o(t))for(s=0,l=t.length;s<l;s++)a(t[s].name,t[s].value);else for(c in t)i(c,t[c]);return n})("",t).join("&"))),e}function d(e,t){return encodeURIComponent(e).replace(/%25/gi,"%2525").replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}},function(e,t){e.exports=i},function(e,t){e.exports=s},function(e,t){e.exports=l},,,function(e,t){e.exports=c},function(e,t){e.exports=u},function(e,t,n){"use strict";n.d(t,"a",(function(){return l})),n.d(t,"b",(function(){return u}));var r=n(1),o=n.n(r),a=n(13),i=n(5),s=function(){return(s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},l=8,c=function(e){return{group:{filter:""},host:{filter:""},application:{filter:""},trigger:{filter:""},tags:{filter:""},proxy:{filter:""},refId:Object(a.b)(e)}};function u(e){var t;if(function(e){return!e.datasource&&!e.datasources&&!e.triggers&&(t=e.targets,!t||o.a.isArray(t)&&(0===t.length||1===t.length&&o.a.isEmpty(t[0])));var t}(e))return delete e.targets,e;var n=function(e){return e.schemaVersion||1}(e);if(n<2&&(e.datasources=[e.datasource],e.targets={},e.targets[e.datasources[0]]=e.triggers,delete e.triggers,delete e.datasource),n<3&&(delete e.lastChangeField,delete e.infoField,delete e.scroll,delete e.hideHostsInMaintenance),n<5&&e.targets&&!o.a.isEmpty(e.targets)&&o.a.each(e.targets,(function(e){o.a.defaultsDeep(e,c())})),n<6&&e.showEvents&&"1"===e.showEvents.value&&(e.showEvents.value=1),n<7){var r=[];for(var i in e.targets){d(v=e.targets[i])||m(v,i)||r.push(s(s({},v),{datasource:i}))}for(var l=0,u=r;l<u.length;l++){(v=u[l]).refId||(v.refId=Object(a.b)(r))}e.targets=r,delete e.datasources}if(n<8){1===e.targets.length?e.targets[0].datasource&&(e.datasource=e.targets[0].datasource,delete e.targets[0].datasource):e.targets.length>1&&(e.datasource="-- Mixed --");for(var h=0,g=e.targets;h<g.length;h++){var v;(v=g[h]).queryType=5,v.showProblems=f(e),v.options=p(e),o.a.defaults(v.options,{hostsInMaintenance:!0}),o.a.defaults(v,{tags:{filter:""}})}e.sortProblems="priority"===(null===(t=e.sortTriggersBy)||void 0===t?void 0:t.value)?"priority":"lastchange",delete e.showEvents,delete e.showTriggers,delete e.hostsInMaintenance,delete e.sortTriggersBy}return e}function p(e){var t,n=2;"acknowledged"===e.showTriggers?n=1:"unacknowledged"===e.showTriggers&&(n=0);var r=1001;return e.limit&&100!==e.limit&&(r=e.limit),{hostsInMaintenance:e.hostsInMaintenance,sortProblems:"priority"===(null===(t=e.sortTriggersBy)||void 0===t?void 0:t.value)?"priority":"default",minSeverity:0,acknowledged:n,limit:r}}function f(e){var t,n,r,o;return 1===(null===(t=e.showEvents)||void 0===t?void 0:t.value)?i.a.Problems:0===(null===(n=e.showEvents)||void 0===n?void 0:n.value)||(null===(o=null===(r=e.showEvents)||void 0===r?void 0:r.value)||void 0===o?void 0:o.length)>1?i.a.History:i.a.Problems}function d(e){return!e||!(e.group&&e.host&&e.application&&e.trigger)}function m(e,t){return e&&"A"===e.refId&&"0"===t}},,,,,,,,,,,,,,,,,,,,,,function(e,t){(function(t){e.exports=t}).call(this,{})},,,function(e,t,n){"use strict";t.__esModule=!0,t.default=t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){var r=Object.defineProperty&&Object.getOwnPropertyDescriptor?Object.getOwnPropertyDescriptor(e,n):{};r.get||r.set?Object.defineProperty(t,n,r):t[n]=e[n]}return t.default=e,t}(n(2)),o=s(n(0)),a=s(n(19)),i=n(75);n(76);function s(e){return e&&e.__esModule?e:{default:e}}var l="unmounted";t.UNMOUNTED=l;var c="exited";t.EXITED=c;var u="entering";t.ENTERING=u;var p="entered";t.ENTERED=p;t.EXITING="exiting";var f=function(e){var t,n;function r(t,n){var r;r=e.call(this,t,n)||this;var o,a=n.transitionGroup,i=a&&!a.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?i?(o=c,r.appearStatus=u):o=p:o=t.unmountOnExit||t.mountOnEnter?l:c,r.state={status:o},r.nextCallback=null,r}n=e,(t=r).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n;var i=r.prototype;return i.getChildContext=function(){return{transitionGroup:null}},r.getDerivedStateFromProps=function(e,t){return e.in&&t.status===l?{status:c}:null},i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==u&&n!==p&&(t=u):n!==u&&n!==p||(t="exiting")}this.updateStatus(!1,t)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=r.appear),{exit:e,enter:t,appear:n}},i.updateStatus=function(e,t){if(void 0===e&&(e=!1),null!==t){this.cancelNextCallback();var n=a.default.findDOMNode(this);t===u?this.performEnter(n,e):this.performExit(n)}else this.props.unmountOnExit&&this.state.status===c&&this.setState({status:l})},i.performEnter=function(e,t){var n=this,r=this.props.enter,o=this.context.transitionGroup?this.context.transitionGroup.isMounting:t,a=this.getTimeouts();t||r?(this.props.onEnter(e,o),this.safeSetState({status:u},(function(){n.props.onEntering(e,o),n.onTransitionEnd(e,a.enter,(function(){n.safeSetState({status:p},(function(){n.props.onEntered(e,o)}))}))}))):this.safeSetState({status:p},(function(){n.props.onEntered(e)}))},i.performExit=function(e){var t=this,n=this.props.exit,r=this.getTimeouts();n?(this.props.onExit(e),this.safeSetState({status:"exiting"},(function(){t.props.onExiting(e),t.onTransitionEnd(e,r.exit,(function(){t.safeSetState({status:c},(function(){t.props.onExited(e)}))}))}))):this.safeSetState({status:c},(function(){t.props.onExited(e)}))},i.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},i.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},i.onTransitionEnd=function(e,t,n){this.setNextCallback(n),e?(this.props.addEndListener&&this.props.addEndListener(e,this.nextCallback),null!=t&&setTimeout(this.nextCallback,t)):setTimeout(this.nextCallback,0)},i.render=function(){var e=this.state.status;if(e===l)return null;var t=this.props,n=t.children,r=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(t,["children"]);if(delete r.in,delete r.mountOnEnter,delete r.unmountOnExit,delete r.appear,delete r.enter,delete r.exit,delete r.timeout,delete r.addEndListener,delete r.onEnter,delete r.onEntering,delete r.onEntered,delete r.onExit,delete r.onExiting,delete r.onExited,"function"==typeof n)return n(e,r);var a=o.default.Children.only(n);return o.default.cloneElement(a,r)},r}(o.default.Component);function d(){}f.contextTypes={transitionGroup:r.object},f.childContextTypes={transitionGroup:function(){}},f.propTypes={},f.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:d,onEntering:d,onEntered:d,onExit:d,onExiting:d,onExited:d},f.UNMOUNTED=0,f.EXITED=1,f.ENTERING=2,f.ENTERED=3,f.EXITING=4;var m=(0,i.polyfill)(f);t.default=m},function(e,t,n){"use strict";var r=function(){};e.exports=r},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r="undefined"!=typeof Element,o="function"==typeof Map,a="function"==typeof Set,i="function"==typeof ArrayBuffer;e.exports=function(e,t){try{return function e(t,s){if(t===s)return!0;if(t&&s&&"object"==n(t)&&"object"==n(s)){if(t.constructor!==s.constructor)return!1;var l,c,u,p;if(Array.isArray(t)){if((l=t.length)!=s.length)return!1;for(c=l;0!=c--;)if(!e(t[c],s[c]))return!1;return!0}if(o&&t instanceof Map&&s instanceof Map){if(t.size!==s.size)return!1;for(p=t.entries();!(c=p.next()).done;)if(!s.has(c.value[0]))return!1;for(p=t.entries();!(c=p.next()).done;)if(!e(c.value[1],s.get(c.value[0])))return!1;return!0}if(a&&t instanceof Set&&s instanceof Set){if(t.size!==s.size)return!1;for(p=t.entries();!(c=p.next()).done;)if(!s.has(c.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(s)){if((l=t.length)!=s.length)return!1;for(c=l;0!=c--;)if(t[c]!==s[c])return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if((l=(u=Object.keys(t)).length)!==Object.keys(s).length)return!1;for(c=l;0!=c--;)if(!Object.prototype.hasOwnProperty.call(s,u[c]))return!1;if(r&&t instanceof Element)return!1;for(c=l;0!=c--;)if(!("_owner"===u[c]&&t.$$typeof||e(t[u[c]],s[u[c]])))return!1;return!0}return t!=t&&s!=s}(e,t)}catch(e){if((e.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw e}}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var r=n(74);function o(){}e.exports=function(){function e(e,t,n,o,a,i){if(i!==r){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=o,n.PropTypes=n,n}},function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},function(e,t,n){"use strict";function r(){var e=this.constructor.getDerivedStateFromProps(this.props,this.state);null!=e&&this.setState(e)}function o(e){this.setState(function(t){var n=this.constructor.getDerivedStateFromProps(e,t);return null!=n?n:null}.bind(this))}function a(e,t){try{var n=this.props,r=this.state;this.props=e,this.state=t,this.__reactInternalSnapshotFlag=!0,this.__reactInternalSnapshot=this.getSnapshotBeforeUpdate(n,r)}finally{this.props=n,this.state=r}}function i(e){var t=e.prototype;if(!t||!t.isReactComponent)throw new Error("Can only polyfill class components");if("function"!=typeof e.getDerivedStateFromProps&&"function"!=typeof t.getSnapshotBeforeUpdate)return e;var n=null,i=null,s=null;if("function"==typeof t.componentWillMount?n="componentWillMount":"function"==typeof t.UNSAFE_componentWillMount&&(n="UNSAFE_componentWillMount"),"function"==typeof t.componentWillReceiveProps?i="componentWillReceiveProps":"function"==typeof t.UNSAFE_componentWillReceiveProps&&(i="UNSAFE_componentWillReceiveProps"),"function"==typeof t.componentWillUpdate?s="componentWillUpdate":"function"==typeof t.UNSAFE_componentWillUpdate&&(s="UNSAFE_componentWillUpdate"),null!==n||null!==i||null!==s){var l=e.displayName||e.name,c="function"==typeof e.getDerivedStateFromProps?"getDerivedStateFromProps()":"getSnapshotBeforeUpdate()";throw Error("Unsafe legacy lifecycles will not be called for components using new component APIs.\n\n"+l+" uses "+c+" but also contains the following legacy lifecycles:"+(null!==n?"\n  "+n:"")+(null!==i?"\n  "+i:"")+(null!==s?"\n  "+s:"")+"\n\nThe above lifecycles should be removed. Learn more about this warning here:\nhttps://fb.me/react-async-component-lifecycle-hooks")}if("function"==typeof e.getDerivedStateFromProps&&(t.componentWillMount=r,t.componentWillReceiveProps=o),"function"==typeof t.getSnapshotBeforeUpdate){if("function"!=typeof t.componentDidUpdate)throw new Error("Cannot polyfill getSnapshotBeforeUpdate() for components that do not define componentDidUpdate() on the prototype");t.componentWillUpdate=a;var u=t.componentDidUpdate;t.componentDidUpdate=function(e,t,n){var r=this.__reactInternalSnapshotFlag?this.__reactInternalSnapshot:n;u.call(this,e,t,r)}}return e}n.r(t),n.d(t,"polyfill",(function(){return i})),r.__suppressDeprecationWarning=!0,o.__suppressDeprecationWarning=!0,a.__suppressDeprecationWarning=!0},function(e,t,n){"use strict";t.__esModule=!0,t.transitionTimeout=function(e){var t="transition"+e+"Timeout",n="transition"+e;return function(e){if(e[n]){if(null==e[t])return new Error(t+" wasn't supplied to CSSTransitionGroup: this can cause unreliable animations and won't be supported in a future version of React. See https://fb.me/react-animation-transition-group-timeout for more information.");if("number"!=typeof e[t])return new Error(t+" must be a number (in milliseconds)")}return null}},t.classNamesShape=t.timeoutsShape=void 0;var r,o=(r=n(2))&&r.__esModule?r:{default:r};var a=o.default.oneOfType([o.default.number,o.default.shape({enter:o.default.number,exit:o.default.number}).isRequired]);t.timeoutsShape=a;var i=o.default.oneOfType([o.default.string,o.default.shape({enter:o.default.string,exit:o.default.string,active:o.default.string}),o.default.shape({enter:o.default.string,enterDone:o.default.string,enterActive:o.default.string,exit:o.default.string,exitDone:o.default.string,exitActive:o.default.string})]);t.classNamesShape=i},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),a=n(19),i=n.n(a),s=n(1),l=n.n(s),c=n(10),u=n(14),p=n(16),f=n(15);var d=["$scope",function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.editor=this,this.panelCtrl=t.ctrl,this.panel=this.panelCtrl.panel,this.layouts=[{text:"Table",value:"table"},{text:"List",value:"list"}],this.fontSizes=["80%","90%","100%","110%","120%","130%","150%","160%","180%","200%","220%","250%"],this.ackFilters=["all triggers","unacknowledged","acknowledged"],this.sortingOptions=[{text:"Default",value:"default"},{text:"Last change",value:"lastchange"},{text:"Severity",value:"priority"}],this.showEventsFields=[{text:"All",value:[0,1]},{text:"OK",value:[0]},{text:"Problems",value:1}]}];function m(){return{restrict:"E",scope:!0,templateUrl:"public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/options_tab.html",controller:d}}var h=n(21),g=n(7),v=n.n(g),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function b(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var E={get:function(e,t,n){if(!t)return e;var r=P(t),o=void 0;try{o=r.reduce((function(e,t){return e[t]}),e)}catch(e){}return void 0!==o?o:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=P(t),o=void 0,a=e;for(;(o=r.shift())&&r.length;)a[o]||(a[o]={}),a=a[o];return a[o]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort((function(e,o){for(var a=0;a<t.length;a+=1){var i=t[a],s=!1===n[a]||"desc"===n[a],l=i(e,o);if(l)return s?-l:l}return n[0]?e[r]-o[r]:o[r]-e[r]}))},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter((function(n,r){return!!t(n)&&(e.splice(r,1),!0)}))},clone:function(e){try{return JSON.parse(JSON.stringify(e,(function(e,t){return"function"==typeof t?t.toString():t})))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce((function(e,t){return e+t}),0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,a=b(t,["children","className"]);return o.a.createElement("div",y({className:v()(e,r)},a),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce((function(e,n,r){var o="function"==typeof t?t(n,r):n[t];return e[o]=w(e[o])?e[o]:[],e[o].push(n),e}),{})},isArray:w,splitProps:function(e){var t=e.className,n=e.style,r=b(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map((function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0}));return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return r=e,function(e){return"function"==typeof e&&!!Object.getPrototypeOf(e).isReactComponent}(r)||function(e){return"function"==typeof e&&String(e).includes(".createElement")}(r)?o.a.createElement(e,t):"function"==typeof e?e(t):n;var r},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function w(e){return Array.isArray(e)}function P(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(w(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var S=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function D(e){return(D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var R=function(e){return o.a.createElement("button",z({type:"button"},e,{className:"-btn"}),e.children)},M=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==D(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+D(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),j(t,[{key:"UNSAFE_componentWillReceiveProps",value:function(e){this.props.page!==e.page&&this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"getPageJumpProperties",value:function(){var e=this;return{onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()},onBlur:this.applyPage,value:""===this.state.page?"":this.state.page+1,onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},inputType:""===this.state.page?"text":"number",pageJumpText:this.props.pageJumpText}}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,a=t.showPageSizeOptions,i=t.pageSizeOptions,s=t.pageSize,l=t.showPageJump,c=t.canPrevious,u=t.canNext,p=t.onPageSizeChange,f=t.className,d=t.PreviousComponent,m=t.NextComponent,h=t.renderPageJump,g=t.renderCurrentPage,y=t.renderTotalPagesCount,b=t.renderPageSizeOptions;return o.a.createElement("div",{className:v()(f,"-pagination"),style:this.props.style},o.a.createElement("div",{className:"-previous"},o.a.createElement(d,{onClick:function(){c&&e.changePage(r-1)},disabled:!c},this.props.previousText)),o.a.createElement("div",{className:"-center"},o.a.createElement("span",{className:"-pageInfo"},this.props.pageText," ",l?h(this.getPageJumpProperties()):g(r)," ",this.props.ofText," ",y(n)),a&&b({pageSize:s,rowsSelectorText:this.props.rowsSelectorText,pageSizeOptions:i,onPageSizeChange:p,rowsText:this.props.rowsText})),o.a.createElement("div",{className:"-next"},o.a.createElement(m,{onClick:function(){u&&e.changePage(r+1)},disabled:!u},this.props.nextText)))}}]),t}(r.Component);M.defaultProps={PreviousComponent:R,NextComponent:R,renderPageJump:function(e){var t=e.onChange,n=e.value,r=e.onBlur,a=e.onKeyPress,i=e.inputType,s=e.pageJumpText;return o.a.createElement("div",{className:"-pageJump"},o.a.createElement("input",{"aria-label":s,type:i,onChange:t,value:n,onBlur:r,onKeyPress:a}))},renderCurrentPage:function(e){return o.a.createElement("span",{className:"-currentPage"},e+1)},renderTotalPagesCount:function(e){return o.a.createElement("span",{className:"-totalPages"},e||1)},renderPageSizeOptions:function(e){var t=e.pageSize,n=e.pageSizeOptions,r=e.rowsSelectorText,a=e.onPageSizeChange,i=e.rowsText;return o.a.createElement("span",{className:"select-wrap -pageSizeOptions"},o.a.createElement("select",{"aria-label":r,onChange:function(e){return a(Number(e.target.value))},value:t},n.map((function(e,t){return o.a.createElement("option",{key:t,value:e},e+" "+i)}))))}};var F=M,A=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function H(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var W=function(){return{}},B={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPage:0,defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return t=null==t?"":t,(e="string"==typeof(e=null==e?"":e)?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:W,getTableProps:W,getTheadGroupProps:W,getTheadGroupTrProps:W,getTheadGroupThProps:W,getTheadProps:W,getTheadTrProps:W,getTheadThProps:W,getTheadFilterProps:W,getTheadFilterTrProps:W,getTheadFilterThProps:W,getTbodyProps:W,getTrGroupProps:W,getTrProps:W,getTdProps:W,getTfootProps:W,getTfootTrProps:W,getTfootTdProps:W,getPaginationProps:W,getLoadingProps:W,getNoDataProps:W,getResizerProps:W,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,Placeholder:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,minResizeWidth:11,className:"",style:{},getProps:W,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:W,footerClassName:"",footerStyle:{},getFooterProps:W,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",pageJumpText:"jump to page",rowsSelectorText:"rows per page",TableComponent:function(e){var t=e.children,n=e.className,r=H(e,["children","className"]);return o.a.createElement("div",A({className:v()("rt-table",n),role:"grid"},r),t)},TheadComponent:E.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:E.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=H(e,["children","className"]);return o.a.createElement("div",A({className:v()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=H(e,["children","className"]);return o.a.createElement("div",A({className:v()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,a=H(e,["toggleSort","className","children"]);return(o.a.createElement("div",A({className:v()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},a),r))},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=H(e,["toggleSort","className","children"]);return o.a.createElement("div",A({className:v()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:E.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange,r=e.column;return o.a.createElement("input",{type:"text",style:{width:"100%"},placeholder:r.Placeholder,value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return o.a.createElement("div",{className:v()("rt-expander",t&&"-open")},"•")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return o.a.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter((function(e){return void 0!==e[n.id]})).map((function(e,r){return o.a.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")}));return o.a.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:F,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,a=H(e,["className","loading","loadingText"]);return o.a.createElement("div",A({className:v()("-loading",{"-active":n},t)},a),o.a.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:E.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:E.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return o.a.createElement("span",null," ")}},I=n(2),L=n.n(I),U={data:L.a.any,loading:L.a.bool,showPagination:L.a.bool,showPaginationTop:L.a.bool,showPaginationBottom:L.a.bool,showPageSizeOptions:L.a.bool,pageSizeOptions:L.a.array,defaultPageSize:L.a.number,showPageJump:L.a.bool,collapseOnSortingChange:L.a.bool,collapseOnPageChange:L.a.bool,collapseOnDataChange:L.a.bool,freezeWhenExpanded:L.a.bool,sortable:L.a.bool,resizable:L.a.bool,filterable:L.a.bool,defaultSortDesc:L.a.bool,defaultSorted:L.a.array,defaultFiltered:L.a.array,defaultResized:L.a.array,defaultExpanded:L.a.object,defaultFilterMethod:L.a.func,defaultSortMethod:L.a.func,onPageChange:L.a.func,onPageSizeChange:L.a.func,onSortedChange:L.a.func,onFilteredChange:L.a.func,onResizedChange:L.a.func,onExpandedChange:L.a.func,pivotBy:L.a.array,pivotValKey:L.a.string,pivotIDKey:L.a.string,subRowsKey:L.a.string,aggregatedKey:L.a.string,nestingLevelKey:L.a.string,originalKey:L.a.string,indexKey:L.a.string,groupedByPivotKey:L.a.string,onFetchData:L.a.func,className:L.a.string,style:L.a.object,getProps:L.a.func,getTableProps:L.a.func,getTheadGroupProps:L.a.func,getTheadGroupTrProps:L.a.func,getTheadGroupThProps:L.a.func,getTheadProps:L.a.func,getTheadTrProps:L.a.func,getTheadThProps:L.a.func,getTheadFilterProps:L.a.func,getTheadFilterTrProps:L.a.func,getTheadFilterThProps:L.a.func,getTbodyProps:L.a.func,getTrGroupProps:L.a.func,getTrProps:L.a.func,getTdProps:L.a.func,getTfootProps:L.a.func,getTfootTrProps:L.a.func,getTfootTdProps:L.a.func,getPaginationProps:L.a.func,getLoadingProps:L.a.func,getNoDataProps:L.a.func,getResizerProps:L.a.func,columns:L.a.arrayOf(L.a.shape({Cell:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),Header:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),Footer:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),Aggregated:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),Pivot:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),PivotValue:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),Expander:L.a.oneOfType([L.a.element,L.a.string,L.a.func]),Filter:L.a.oneOfType([L.a.element,L.a.func]),sortable:L.a.bool,resizable:L.a.bool,filterable:L.a.bool,show:L.a.bool,minWidth:L.a.number,minResizeWidth:L.a.number,className:L.a.string,style:L.a.object,getProps:L.a.func,aggregate:L.a.func,headerClassName:L.a.string,headerStyle:L.a.object,getHeaderProps:L.a.func,footerClassName:L.a.string,footerStyle:L.a.object,getFooterProps:L.a.func,filterMethod:L.a.func,filterAll:L.a.bool,sortMethod:L.a.func})),expanderDefaults:L.a.shape({sortable:L.a.bool,resizable:L.a.bool,filterable:L.a.bool,width:L.a.number}),pivotDefaults:L.a.object,previousText:L.a.node,nextText:L.a.node,loadingText:L.a.node,noDataText:L.a.node,pageText:L.a.node,ofText:L.a.node,rowsText:L.a.node,pageJumpText:L.a.node,rowsSelectorText:L.a.node,TableComponent:L.a.elementType,TheadComponent:L.a.elementType,TbodyComponent:L.a.elementType,TrGroupComponent:L.a.elementType,TrComponent:L.a.elementType,ThComponent:L.a.elementType,TdComponent:L.a.elementType,TfootComponent:L.a.elementType,FilterComponent:L.a.elementType,ExpanderComponent:L.a.elementType,PivotValueComponent:L.a.elementType,AggregatedComponent:L.a.elementType,PivotComponent:L.a.elementType,PaginationComponent:L.a.elementType,PreviousComponent:L.a.elementType,NextComponent:L.a.elementType,LoadingComponent:L.a.elementType,NoDataComponent:L.a.elementType,ResizerComponent:L.a.elementType,PadRowComponent:L.a.elementType};function G(e){return(G="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var K=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{!r&&s.return&&s.return()}finally{if(o)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")},q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==G(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:e.defaultPage,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+G(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),V(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,a=t.style,i=t.getProps,s=t.getTableProps,l=t.getTheadGroupProps,c=t.getTheadGroupTrProps,u=t.getTheadGroupThProps,p=t.getTheadProps,f=t.getTheadTrProps,d=t.getTheadThProps,m=t.getTheadFilterProps,h=t.getTheadFilterTrProps,g=t.getTheadFilterThProps,y=t.getTbodyProps,b=t.getTrGroupProps,w=t.getTrProps,P=t.getTdProps,x=t.getTfootProps,C=t.getTfootTrProps,O=t.getTfootTdProps,S=t.getPaginationProps,k=t.getLoadingProps,N=t.getNoDataProps,T=t.getResizerProps,_=t.showPagination,D=t.showPaginationTop,j=t.showPaginationBottom,z=t.manual,R=t.loadingText,M=t.noDataText,F=t.sortable,A=t.multiSort,H=t.resizable,W=t.filterable,I=t.pivotIDKey,L=t.pivotValKey,U=t.pivotBy,G=t.subRowsKey,V=t.aggregatedKey,$=t.originalKey,Y=t.indexKey,J=t.groupedByPivotKey,X=t.loading,Z=t.pageSize,Q=t.page,ee=t.sorted,te=t.filtered,ne=t.resized,re=t.expanded,oe=t.pages,ae=t.onExpandedChange,ie=t.TableComponent,se=t.TheadComponent,le=t.TbodyComponent,ce=t.TrGroupComponent,ue=t.TrComponent,pe=t.ThComponent,fe=t.TdComponent,de=t.TfootComponent,me=t.PaginationComponent,he=t.LoadingComponent,ge=t.SubComponent,ve=t.NoDataComponent,ye=t.ResizerComponent,be=t.ExpanderComponent,Ee=t.PivotValueComponent,we=t.PivotComponent,Pe=t.AggregatedComponent,xe=t.FilterComponent,Ce=t.PadRowComponent,Oe=t.resolvedData,Se=t.allVisibleColumns,ke=t.headerGroups,Ne=t.hasHeaderGroups,Te=t.sortedData,_e=t.currentlyResizing,De=Z*Q,je=De+Z,ze=z?Oe:Te.slice(De,je),Re=this.getMinRows(),Me=E.range(Math.max(Re-ze.length,0)),Fe=Se.some((function(e){return e.Footer})),Ae=W||Se.some((function(e){return e.filterable})),He=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map((function(t,o){var a=q({},t,{_viewIndex:r+=1}),i=n.concat([o]);if(a[G]&&E.get(re,i)){var s=e(a[G],i,r),l=K(s,2);a[G]=l[0],r=l[1]}return a})),r]}(ze),We=K(He,1);ze=We[0];var Be=Q>0,Ie=Q+1<oe,Le=E.sum(Se.map((function(e){var t=ne.find((function(t){return t.id===e.id}))||{};return E.getFirstDefined(t.value,e.width,e.minWidth)}))),Ue=-1,Ge=q({},t,{startRow:De,endRow:je,pageRows:ze,minRows:Re,padRows:Me,hasColumnFooter:Fe,canPrevious:Be,canNext:Ie,rowMinWidth:Le}),Ke=E.splitProps(i(Ge,void 0,void 0,this)),qe=E.splitProps(s(Ge,void 0,void 0,this)),Ve=E.splitProps(y(Ge,void 0,void 0,this)),$e=k(Ge,void 0,void 0,this),Ye=N(Ge,void 0,void 0,this),Je=function(t,n){var r=function(e){return(ne.find((function(t){return t.id===e.id}))||{}).value},a=E.sum(t.columns.map((function(e){return e.width||r(e)?0:e.minWidth}))),i=E.sum(t.columns.map((function(e){return E.getFirstDefined(r(e),e.width,e.minWidth)}))),s=E.sum(t.columns.map((function(e){return E.getFirstDefined(r(e),e.width,e.maxWidth)}))),l=E.splitProps(u(Ge,void 0,t,e)),c=E.splitProps(t.getHeaderProps(Ge,void 0,t,e)),p=[t.headerClassName,l.className,c.className],f=q({},t.headerStyle,l.style,c.style),d=q({},l.rest,c.rest),m={flex:a+" 0 auto",width:E.asPx(i),maxWidth:E.asPx(s)};return o.a.createElement(pe,q({key:n+"-"+t.id,className:v()(p),style:q({},f,m)},d),E.normalizeComponent(t.Header,{data:Te,column:t}))},Xe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a=ee.find((function(e){return e.id===t.id})),i="function"==typeof t.show?t.show():t.show,s=E.getFirstDefined(r.value,t.width,t.minWidth),l=E.getFirstDefined(r.value,t.width,t.maxWidth),c=E.splitProps(d(Ge,void 0,t,e)),u=E.splitProps(t.getHeaderProps(Ge,void 0,t,e)),p=[t.headerClassName,c.className,u.className],f=q({},t.headerStyle,c.style,u.style),m=q({},c.rest,u.rest),h=E.getFirstDefined(t.resizable,H,!1),g=h?o.a.createElement(ye,q({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},T("finalState",void 0,t,e))):null,y=E.getFirstDefined(t.sortable,F,!1);return o.a.createElement(pe,q({key:n+"-"+t.id,className:v()(p,h&&"rt-resizable-header",a?a.desc?"-sort-desc":"-sort-asc":"",y&&"-cursor-pointer",!i&&"-hidden",U&&U.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:q({},f,{flex:s+" 0 auto",width:E.asPx(s),maxWidth:E.asPx(l)}),toggleSort:function(n){y&&e.sortColumn(t,!!A&&n.shiftKey)}},m),o.a.createElement("div",{className:v()(h&&"rt-resizable-header-content")},E.normalizeComponent(t.Header,{data:Te,column:t})),g)},Ze=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a=E.getFirstDefined(r.value,t.width,t.minWidth),i=E.getFirstDefined(r.value,t.width,t.maxWidth),s=E.splitProps(g(Ge,void 0,t,e)),l=E.splitProps(t.getHeaderProps(Ge,void 0,t,e)),c=[t.headerClassName,s.className,l.className],u=q({},t.headerStyle,s.style,l.style),p=q({},s.rest,l.rest),f=te.find((function(e){return e.id===t.id})),d=t.Filter||xe,m=E.getFirstDefined(t.filterable,W,!1);return o.a.createElement(pe,q({key:n+"-"+t.id,className:v()(c),style:q({},u,{flex:a+" 0 auto",width:E.asPx(a),maxWidth:E.asPx(i)})},p),m?E.normalizeComponent(d,{column:t,filter:f,onChange:function(n){return e.filterColumn(t,n)}},B.column.Filter):null)},Qe=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a="function"==typeof t.show?t.show():t.show,i=E.getFirstDefined(r.value,t.width,t.minWidth),s=i,l=E.getFirstDefined(r.value,t.width,t.maxWidth),c=E.splitProps(P(Ge,void 0,t,e)),u=E.splitProps(t.getProps(Ge,void 0,t,e)),p=[c.className,t.className,u.className],f=q({},c.style,t.style,u.style);return o.a.createElement(fe,q({key:n+"-"+t.id,className:v()(p,!a&&"hidden"),style:q({},f,{flex:s+" 0 auto",width:E.asPx(i),maxWidth:E.asPx(l)})},c.rest),E.normalizeComponent(Ce))},et=function(t,n){var r=b(Ge,void 0,void 0,e),a=E.splitProps(w(Ge,void 0,void 0,e));return o.a.createElement(ce,q({key:"pad-"+n},r),o.a.createElement(ue,{className:v()("-padRow",(ze.length+n)%2?"-even":"-odd",a.className),style:a.style||{}},Se.map(Qe)))},tt=function(t,n){var r=ne.find((function(e){return e.id===t.id}))||{},a="function"==typeof t.show?t.show():t.show,i=E.getFirstDefined(r.value,t.width,t.minWidth),s=E.getFirstDefined(r.value,t.width,t.maxWidth),l=E.splitProps(O(Ge,void 0,t,e)),c=E.splitProps(t.getProps(Ge,void 0,t,e)),u=E.splitProps(t.getFooterProps(Ge,void 0,t,e)),p=[l.className,t.className,c.className,u.className],f=q({},l.style,t.style,c.style,u.style);return o.a.createElement(fe,q({key:n+"-"+t.id,className:v()(p,!a&&"hidden"),style:q({},f,{flex:i+" 0 auto",width:E.asPx(i),maxWidth:E.asPx(s)})},c.rest,l.rest,u.rest),E.normalizeComponent(t.Footer,{data:Te,column:t}))},nt=function(n){var r=E.splitProps(S(Ge,void 0,void 0,e));return o.a.createElement(me,q({},t,{pages:oe,canPrevious:Be,canNext:Ie,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:r.className,style:r.style,isTop:n},r.rest))},rt=function(){return o.a.createElement("div",q({className:v()("ReactTable",r,Ke.className),style:q({},a,Ke.style)},Ke.rest),_&&D?o.a.createElement("div",{className:"pagination-top"},nt(!0)):null,o.a.createElement(ie,q({className:v()(qe.className,_e?"rt-resizing":""),style:qe.style},qe.rest),Ne?(g=E.splitProps(l(Ge,void 0,void 0,e)),y=E.splitProps(c(Ge,void 0,void 0,e)),o.a.createElement(se,q({className:v()("-headerGroups",g.className),style:q({},g.style,{minWidth:Le+"px"})},g.rest),o.a.createElement(ue,q({className:y.className,style:y.style},y.rest),ke.map(Je)))):null,(u=E.splitProps(p(Ge,void 0,void 0,e)),d=E.splitProps(f(Ge,void 0,void 0,e)),o.a.createElement(se,q({className:v()("-header",u.className),style:q({},u.style,{minWidth:Le+"px"})},u.rest),o.a.createElement(ue,q({className:d.className,style:d.style},d.rest),Se.map(Xe)))),Ae?(i=E.splitProps(m(Ge,void 0,void 0,e)),s=E.splitProps(h(Ge,void 0,void 0,e)),o.a.createElement(se,q({className:v()("-filters",i.className),style:q({},i.style,{minWidth:Le+"px"})},i.rest),o.a.createElement(ue,q({className:s.className,style:s.style},s.rest),Se.map(Ze)))):null,o.a.createElement(le,q({className:v()(Ve.className),style:q({},Ve.style,{minWidth:Le+"px"})},Ve.rest),ze.map((function(t,n){return function t(n,r){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={original:n[$],row:n,index:n[Y],viewIndex:Ue+=1,pageSize:Z,page:Q,level:a.length,nestingPath:a.concat([r]),aggregated:n[V],groupedByPivot:n[J],subRows:n[G]},s=E.get(re,i.nestingPath),l=b(Ge,i,void 0,e),c=E.splitProps(w(Ge,i,void 0,e));return o.a.createElement(ce,q({key:i.nestingPath.join("_")},l),o.a.createElement(ue,q({className:v()(c.className,n._viewIndex%2?"-even":"-odd"),style:c.style},c.rest),Se.map((function(t,r){var a=ne.find((function(e){return e.id===t.id}))||{},l="function"==typeof t.show?t.show():t.show,c=E.getFirstDefined(a.value,t.width,t.minWidth),u=E.getFirstDefined(a.value,t.width,t.maxWidth),p=E.splitProps(P(Ge,i,t,e)),f=E.splitProps(t.getProps(Ge,i,t,e)),d=[p.className,t.className,f.className],m=q({},p.style,t.style,f.style),h=q({},i,{isExpanded:s,column:q({},t),value:i.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:l,width:c,maxWidth:u,tdProps:p,columnProps:f,classes:d,styles:m}),g=h.value,y=void 0,b=void 0,w=void 0,x=E.normalizeComponent(t.Cell,h,g),C=t.Aggregated||(t.aggregate?t.Cell:Pe),O=t.Expander||be,S=t.PivotValue||Ee,k=we||function(e){return o.a.createElement("div",null,o.a.createElement(O,e),o.a.createElement(S,e))},N=t.Pivot||k;(h.pivoted||h.expander)&&(h.expandable=!0,y=!0,!h.pivoted||h.subRows||ge||(h.expandable=!1)),h.pivoted?(b=i.row[I]===t.id&&h.subRows,w=U.indexOf(t.id)>U.indexOf(i.row[I])&&h.subRows,x=b?E.normalizeComponent(N,q({},h,{value:n[L]}),n[L]):w?E.normalizeComponent(C,h,g):null):h.aggregated&&(x=E.normalizeComponent(C,h,g)),h.expander&&(x=E.normalizeComponent(O,h,n[L]),U&&(h.groupedByPivot&&(x=null),h.subRows||ge||(x=null)));var T=y?function(t){var n=E.clone(re);return n=s?E.set(n,h.nestingPath,!1):E.set(n,h.nestingPath,{}),e.setStateWithData({expanded:n},(function(){return ae&&ae(n,h.nestingPath,t,h)}))}:function(){},_={onClick:T};return p.rest.onClick&&(_.onClick=function(e){p.rest.onClick(e,(function(){return T(e)}))}),f.rest.onClick&&(_.onClick=function(e){f.rest.onClick(e,(function(){return T(e)}))}),o.a.createElement(fe,q({key:r+"-"+t.id,className:v()(d,!h.expandable&&!l&&"hidden",h.expandable&&"rt-expandable",(b||w)&&"rt-pivot"),style:q({},m,{flex:c+" 0 auto",width:E.asPx(c),maxWidth:E.asPx(u)})},p.rest,f.rest,_),x)}))),i.subRows&&s&&i.subRows.map((function(e,n){return t(e,n,i.nestingPath)})),ge&&!i.subRows&&s&&ge(i,(function(){var e=E.clone(re);E.set(e,i.nestingPath,!1)})))}(t,n)})),Me.map(et)),Fe?(t=E.splitProps(x(Ge,void 0,void 0,e)),n=E.splitProps(C(Ge,void 0,void 0,e)),o.a.createElement(de,q({className:t.className,style:q({},t.style,{minWidth:Le+"px"})},t.rest),o.a.createElement(ue,q({className:v()(n.className),style:n.style},n.rest),Se.map(tt)))):null),_&&j?o.a.createElement("div",{className:"pagination-bottom"},nt(!1)):null,!ze.length&&o.a.createElement(ve,Ye,E.normalizeComponent(M)),o.a.createElement(he,q({loading:X,loadingText:R},$e)));var t,n,i,s,u,d,g,y};return n?n(Ge,rt,this):rt()}}]),t}(function(e){return function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==O(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+O(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),N(t,[{key:"getResolvedState",value:function(e,t){return k({},E.compactObject(this.state),E.compactObject(this.props),E.compactObject(t),E.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,a=e.pivotBy,i=void 0===a?[]:a,s=e.data,l=e.resolveData,c=e.pivotIDKey,u=e.pivotValKey,p=e.subRowsKey,f=e.aggregatedKey,d=e.nestingLevelKey,m=e.originalKey,h=e.indexKey,g=e.groupedByPivotKey,v=e.SubComponent,y=!1;r.forEach((function(e){e.columns&&(y=!0)}));var b=[].concat(_(r)),w=r.find((function(e){return e.expander||e.columns&&e.columns.some((function(e){return e.expander}))}));w&&!w.expander&&(w=w.columns.find((function(e){return e.expander}))),v&&!w&&(b=[w={expander:!0}].concat(_(b)));var P=[],x=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?k({},n.props.column,n.props.expanderDefaults,e):k({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var o=r.accessor;return r.accessor=function(e){return E.get(e,o)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return P.push(r),r},C=b.map((function(e){return e.columns?k({},e,{columns:e.columns.map((function(t){return x(t,e)}))}):x(e)})).slice(),O=[],N=(C=(C=C.map((function(e){if(e.columns){var t=e.columns.filter((function(e){return!(i.indexOf(e.id)>-1)&&E.getFirstDefined(e.show,!0)}));return k({},e,{columns:t})}return e}))).filter((function(e){return e.columns?e.columns.length:!(i.indexOf(e.id)>-1)&&E.getFirstDefined(e.show,!0)}))).findIndex((function(e){return e.pivot}));if(i.length){var D=[];i.forEach((function(e){var t=P.find((function(t){return t.id===e}));t&&D.push(t)}));var j=D.reduce((function(e,t){return e&&e===t.parentColumn&&t.parentColumn}),D[0].parentColumn),z=y&&j.Header,R={Header:z=z||function(){return o.a.createElement("strong",null,"Pivoted")},columns:D.map((function(e){return k({},n.props.pivotDefaults,e,{pivoted:!0})}))};N>=0?(R=k({},C[N],R),C.splice(N,1,R)):C.unshift(R)}var M=[],F=[],A=function(e,t){M.push(k({},n.props.column,t,{columns:e})),F=[]};C.forEach((function(e){if(e.columns)return O=O.concat(e.columns),F.length>0&&A(F),void A(e.columns,e);O.push(e),F.push(e)})),y&&F.length>0&&A(F);var H=this.resolvedData;this.resolvedData&&!t||(H=l(s),this.resolvedData=H),H=H.map((function(e,t){return function e(t,n){var r,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=(T(r={},m,t),T(r,h,n),T(r,p,t[p]),T(r,d,o),r);return P.forEach((function(e){e.expander||(a[e.id]=e.accessor(t))})),a[p]&&(a[p]=a[p].map((function(t,n){return e(t,n,o+1)}))),a}(e,t)}));var W=O.filter((function(e){return!e.expander&&e.aggregate})),B=function(e){var t={};return W.forEach((function(n){var r=e.map((function(e){return e[n.id]}));t[n.id]=n.aggregate(r,e)})),t};if(i.length){H=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var o=Object.entries(E.groupBy(t,n[r])).map((function(e){var t,o=S(e,2),a=o[0],i=o[1];return T(t={},c,n[r]),T(t,u,a),T(t,n[r],a),T(t,p,i),T(t,d,r),T(t,g,!0),t}));return o=o.map((function(t){var o,a=e(t[p],n,r+1);return k({},t,(T(o={},p,a),T(o,f,!0),o),B(a))}))}(H,i)}return k({},e,{resolvedData:H,allVisibleColumns:O,headerGroups:M,allDecoratedColumns:P,hasHeaderGroups:y})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,o=e.defaultFilterMethod,a=e.resolvedData,i=e.allDecoratedColumns,s={};return i.filter((function(e){return e.sortMethod})).forEach((function(e){s[e.id]=e.sortMethod})),{sortedData:t?a:this.sortData(this.filterData(a,r,o,i),n,s)}}},{key:"fireFetchData",value:function(){var e=k({},this.getResolvedState(),{page:this.getStateOrProp("page"),pageSize:this.getStateOrProp("pageSize"),filtered:this.getStateOrProp("filtered")});this.props.onFetchData(e,this)}},{key:"getPropOrState",value:function(e){return E.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return E.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var o=this,a=e;return t.length&&(a=(a=t.reduce((function(e,t){var o=r.find((function(e){return e.id===t.id}));if(!o||!1===o.filterable)return e;var a=o.filterMethod||n;return o.filterAll?a(t,e,o):e.filter((function(e){return a(t,e,o)}))}),a)).map((function(e){return e[o.props.subRowsKey]?k({},e,T({},o.props.subRowsKey,o.filterData(e[o.props.subRowsKey],t,n,r))):e})).filter((function(e){return!e[o.props.subRowsKey]||e[o.props.subRowsKey].length>0}))),a}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var o=(this.props.orderByMethod||E.orderBy)(e,t.map((function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}})),t.map((function(e){return!e.desc})),this.props.indexKey);return o.forEach((function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))})),o}},{key:"getMinRows",value:function(){return E.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,o={page:e};r&&(o.expanded={}),this.setStateWithData(o,(function(){return n&&n(e)}))}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,o=Math.floor(r/e);this.setStateWithData({pageSize:e,page:o},(function(){return t&&t(e,o)}))}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,o=n.skipNextSort,a=n.defaultSortDesc,i=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:a,s=!i;if(o)this.setStateWithData({skipNextSort:!1});else{var l=this.props.onSortedChange,c=E.clone(r||[]).map((function(e){return e.desc=E.isSortingDesc(e),e}));if(E.isArray(e)){var u=c.findIndex((function(t){return t.id===e[0].id}));if(u>-1)c[u].desc===s?t?c.splice(u,e.length):e.forEach((function(e,t){c[u+t].desc=i})):e.forEach((function(e,t){c[u+t].desc=s})),t||(c=c.slice(u,e.length));else c=t?c.concat(e.map((function(e){return{id:e.id,desc:i}}))):e.map((function(e){return{id:e.id,desc:i}}))}else{var p=c.findIndex((function(t){return t.id===e.id}));if(p>-1){var f=c[p];f.desc===s?t?c.splice(p,1):(f.desc=i,c=[f]):(f.desc=s,t||(c=[f]))}else t?c.push({id:e.id,desc:i}):c=[{id:e.id,desc:i}]}this.setStateWithData({page:!r.length&&c.length||!t?0:this.state.page,sorted:c},(function(){return l&&l(c,e,t)}))}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,o=(n||[]).filter((function(t){return t.id!==e.id}));""!==t&&o.push({id:e.id,value:t}),this.setStateWithData({filtered:o},(function(){return r&&r(o,e,t)}))}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var o=e.target.parentElement.getBoundingClientRect().width,a=void 0;a=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:a,parentWidth:o}},(function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))}))}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props,n=t.onResizedChange,r=t.column,o=this.getResolvedState(),a=o.resized,i=o.currentlyResizing,s=o.columns.find((function(e){return e.accessor===i.id||e.id===i.id})),l=s&&null!=s.minResizeWidth?s.minResizeWidth:r.minResizeWidth,c=a.filter((function(e){return e.id!==i.id})),u=void 0;"touchmove"===e.type?u=e.changedTouches[0].pageX:"mousemove"===e.type&&(u=e.pageX);var p=Math.max(i.parentWidth+u-i.startX,l);c.push({id:i.id,value:p}),this.setStateWithData({resized:c},(function(){return n&&n(c,e)}))}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),t}(e)}(function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==x(t)&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+x(t));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),C(t,[{key:"UNSAFE_componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"UNSAFE_componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach((function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])})),["sortable","filterable","resizable"].forEach((function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",o="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[o]}})),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),o=this.getResolvedState({},e),a=o.freezeWhenExpanded;if(o.frozen=!1,a)for(var i=Object.keys(o.expanded),s=0;s<i.length;s+=1)if(o.expanded[i[s]]){o.frozen=!0;break}return(r.frozen&&!o.frozen||r.sorted!==o.sorted||r.filtered!==o.filtered||r.showFilters!==o.showFilters||!o.frozen&&r.resolvedData!==o.resolvedData)&&((r.sorted!==o.sorted&&this.props.collapseOnSortingChange||r.filtered!==o.filtered||r.showFilters!==o.showFilters||r.sortedData&&!o.frozen&&r.resolvedData!==o.resolvedData&&this.props.collapseOnDataChange)&&(o.expanded={}),Object.assign(o,this.getSortedData(o))),r.filtered!==o.filtered&&(o.page=0),o.sortedData&&(o.pages=o.manual?o.pages:Math.ceil(o.sortedData.length/o.pageSize),o.page=o.manual?o.page:Math.max(o.page>=o.pages?o.pages-1:o.page,0)),this.setState(o,(function(){t&&t(),r.page===o.page&&r.pageSize===o.pageSize&&r.sorted===o.sorted&&r.filtered===o.filtered||n.fireFetchData()}))}}]),t}(r.Component)));$.propTypes=U,$.defaultProps=B;var Y=$,J=n(9),X=n.n(J),Z=n(13),Q=n(8),ee=r.createContext(),te=r.createContext();function ne(e){var t=e.children,n=r.useState(null),o=n[0],a=n[1];return r.useEffect((function(){return function(){a(null)}}),[a]),r.createElement(ee.Provider,{value:o},r.createElement(te.Provider,{value:a},t))}var re=n(47),oe=n.n(re),ae=function(e){return Array.isArray(e)?e[0]:e},ie=function(e){if("function"==typeof e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e.apply(void 0,n)}},se=function(e,t){if("function"==typeof e)return ie(e,t);null!=e&&(e.current=t)},le=function(e){return e.reduce((function(e,t){var n=t[0],r=t[1];return e[n]=r,e}),{})},ce="undefined"!=typeof window&&window.document&&window.document.createElement?r.useLayoutEffect:r.useEffect;function ue(e){var t=e.children,n=e.innerRef,o=r.useContext(te),a=r.useCallback((function(e){se(n,e),ie(o,e)}),[n,o]);return r.useEffect((function(){return function(){return se(n,null)}})),r.useEffect((function(){oe()(Boolean(o),"`Reference` should not be used outside of a `Manager` component.")}),[o]),ae(t)({ref:a})}function pe(e){var t=e.getBoundingClientRect();return{width:t.width,height:t.height,top:t.top,right:t.right,bottom:t.bottom,left:t.left,x:t.left,y:t.top}}function fe(e){if("[object Window]"!==e.toString()){var t=e.ownerDocument;return t?t.defaultView:window}return e}function de(e){var t=fe(e);return{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function me(e){return e instanceof fe(e).Element||e instanceof Element}function he(e){return e instanceof fe(e).HTMLElement||e instanceof HTMLElement}function ge(e){return e?(e.nodeName||"").toLowerCase():null}function ve(e){return(me(e)?e.ownerDocument:e.document).documentElement}function ye(e){return pe(ve(e)).left+de(e).scrollLeft}function be(e){return fe(e).getComputedStyle(e)}function Ee(e){var t=be(e),n=t.overflow,r=t.overflowX,o=t.overflowY;return/auto|scroll|overlay|hidden/.test(n+o+r)}function we(e,t,n){void 0===n&&(n=!1);var r,o,a=ve(t),i=pe(e),s={scrollLeft:0,scrollTop:0},l={x:0,y:0};return n||(("body"!==ge(t)||Ee(a))&&(s=(r=t)!==fe(r)&&he(r)?{scrollLeft:(o=r).scrollLeft,scrollTop:o.scrollTop}:de(r)),he(t)?((l=pe(t)).x+=t.clientLeft,l.y+=t.clientTop):a&&(l.x=ye(a))),{x:i.left+s.scrollLeft-l.x,y:i.top+s.scrollTop-l.y,width:i.width,height:i.height}}function Pe(e){return{x:e.offsetLeft,y:e.offsetTop,width:e.offsetWidth,height:e.offsetHeight}}function xe(e){return"html"===ge(e)?e:e.assignedSlot||e.parentNode||e.host||ve(e)}function Ce(e,t){void 0===t&&(t=[]);var n=function e(t){return["html","body","#document"].indexOf(ge(t))>=0?t.ownerDocument.body:he(t)&&Ee(t)?t:e(xe(t))}(e),r="body"===ge(n),o=fe(n),a=r?[o].concat(o.visualViewport||[],Ee(n)?n:[]):n,i=t.concat(a);return r?i:i.concat(Ce(xe(a)))}function Oe(e){return["table","td","th"].indexOf(ge(e))>=0}function Se(e){return he(e)&&"fixed"!==be(e).position?e.offsetParent:null}function ke(e){for(var t=fe(e),n=Se(e);n&&Oe(n);)n=Se(n);return n&&"body"===ge(n)&&"static"===be(n).position?t:n||t}var Ne="top",Te="bottom",_e="right",De="left",je="auto",ze=[Ne,Te,_e,De],Re="start",Me="end",Fe="clippingParents",Ae="viewport",He="popper",We="reference",Be=ze.reduce((function(e,t){return e.concat([t+"-"+Re,t+"-"+Me])}),[]),Ie=[].concat(ze,[je]).reduce((function(e,t){return e.concat([t,t+"-"+Re,t+"-"+Me])}),[]),Le=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function Ue(e){var t=new Map,n=new Set,r=[];return e.forEach((function(e){t.set(e.name,e)})),e.forEach((function(e){n.has(e.name)||function e(o){n.add(o.name),[].concat(o.requires||[],o.requiresIfExists||[]).forEach((function(r){if(!n.has(r)){var o=t.get(r);o&&e(o)}})),r.push(o)}(e)})),r}var Ge={placement:"bottom",modifiers:[],strategy:"absolute"};function Ke(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return!t.some((function(e){return!(e&&"function"==typeof e.getBoundingClientRect)}))}function qe(e){void 0===e&&(e={});var t=e,n=t.defaultModifiers,r=void 0===n?[]:n,o=t.defaultOptions,a=void 0===o?Ge:o;return function(e,t,n){void 0===n&&(n=a);var o,i,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},Ge,{},a),modifiersData:{},elements:{reference:e,popper:t},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){p(),s.options=Object.assign({},a,{},s.options,{},n),s.scrollParents={reference:me(e)?Ce(e):e.contextElement?Ce(e.contextElement):[],popper:Ce(t)};var o=function(e){var t=Ue(e);return Le.reduce((function(e,n){return e.concat(t.filter((function(e){return e.phase===n})))}),[])}(function(e){var t=e.reduce((function(e,t){var n=e[t.name];return e[t.name]=n?Object.assign({},n,{},t,{options:Object.assign({},n.options,{},t.options),data:Object.assign({},n.data,{},t.data)}):t,e}),{});return Object.keys(t).map((function(e){return t[e]}))}([].concat(r,s.options.modifiers)));return s.orderedModifiers=o.filter((function(e){return e.enabled})),s.orderedModifiers.forEach((function(e){var t=e.name,n=e.options,r=void 0===n?{}:n,o=e.effect;if("function"==typeof o){var a=o({state:s,name:t,instance:u,options:r});l.push(a||function(){})}})),u.update()},forceUpdate:function(){if(!c){var e=s.elements,t=e.reference,n=e.popper;if(Ke(t,n)){s.rects={reference:we(t,ke(n),"fixed"===s.options.strategy),popper:Pe(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(e){return s.modifiersData[e.name]=Object.assign({},e.data)}));for(var r=0;r<s.orderedModifiers.length;r++)if(!0!==s.reset){var o=s.orderedModifiers[r],a=o.fn,i=o.options,l=void 0===i?{}:i,p=o.name;"function"==typeof a&&(s=a({state:s,options:l,name:p,instance:u})||s)}else s.reset=!1,r=-1}}},update:(o=function(){return new Promise((function(e){u.forceUpdate(),e(s)}))},function(){return i||(i=new Promise((function(e){Promise.resolve().then((function(){i=void 0,e(o())}))}))),i}),destroy:function(){p(),c=!0}};if(!Ke(e,t))return u;function p(){l.forEach((function(e){return e()})),l=[]}return u.setOptions(n).then((function(e){!c&&n.onFirstUpdate&&n.onFirstUpdate(e)})),u}}var Ve={passive:!0};function $e(e){return e.split("-")[0]}function Ye(e){return e.split("-")[1]}function Je(e){return["top","bottom"].indexOf(e)>=0?"x":"y"}function Xe(e){var t,n=e.reference,r=e.element,o=e.placement,a=o?$e(o):null,i=o?Ye(o):null,s=n.x+n.width/2-r.width/2,l=n.y+n.height/2-r.height/2;switch(a){case Ne:t={x:s,y:n.y-r.height};break;case Te:t={x:s,y:n.y+n.height};break;case _e:t={x:n.x+n.width,y:l};break;case De:t={x:n.x-r.width,y:l};break;default:t={x:n.x,y:n.y}}var c=a?Je(a):null;if(null!=c){var u="y"===c?"height":"width";switch(i){case Re:t[c]=Math.floor(t[c])-Math.floor(n[u]/2-r[u]/2);break;case Me:t[c]=Math.floor(t[c])+Math.ceil(n[u]/2-r[u]/2)}}return t}var Ze={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Qe(e){var t,n=e.popper,r=e.popperRect,o=e.placement,a=e.offsets,i=e.position,s=e.gpuAcceleration,l=e.adaptive,c=function(e){var t=e.x,n=e.y,r=window.devicePixelRatio||1;return{x:Math.round(t*r)/r||0,y:Math.round(n*r)/r||0}}(a),u=c.x,p=c.y,f=a.hasOwnProperty("x"),d=a.hasOwnProperty("y"),m=De,h=Ne,g=window;if(l){var v=ke(n);v===fe(n)&&(v=ve(n)),o===Ne&&(h=Te,p-=v.clientHeight-r.height,p*=s?1:-1),o===De&&(m=_e,u-=v.clientWidth-r.width,u*=s?1:-1)}var y,b=Object.assign({position:i},l&&Ze);return s?Object.assign({},b,((y={})[h]=d?"0":"",y[m]=f?"0":"",y.transform=(g.devicePixelRatio||1)<2?"translate("+u+"px, "+p+"px)":"translate3d("+u+"px, "+p+"px, 0)",y)):Object.assign({},b,((t={})[h]=d?p+"px":"",t[m]=f?u+"px":"",t.transform="",t))}var et={left:"right",right:"left",bottom:"top",top:"bottom"};function tt(e){return e.replace(/left|right|bottom|top/g,(function(e){return et[e]}))}var nt={start:"end",end:"start"};function rt(e){return e.replace(/start|end/g,(function(e){return nt[e]}))}function ot(e){return parseFloat(e)||0}function at(e){var t=fe(e),n=function(e){var t=he(e)?be(e):{};return{top:ot(t.borderTopWidth),right:ot(t.borderRightWidth),bottom:ot(t.borderBottomWidth),left:ot(t.borderLeftWidth)}}(e),r="html"===ge(e),o=ye(e),a=e.clientWidth+n.right,i=e.clientHeight+n.bottom;return r&&t.innerHeight-e.clientHeight>50&&(i=t.innerHeight-n.bottom),{top:r?0:e.clientTop,right:e.clientLeft>n.left?n.right:r?t.innerWidth-a-o:e.offsetWidth-a,bottom:r?t.innerHeight-i:e.offsetHeight-i,left:r?o:e.clientLeft}}function it(e,t){var n=Boolean(t.getRootNode&&t.getRootNode().host);if(e.contains(t))return!0;if(n){var r=t;do{if(r&&e.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function st(e){return Object.assign({},e,{left:e.x,top:e.y,right:e.x+e.width,bottom:e.y+e.height})}function lt(e,t){return t===Ae?st(function(e){var t=fe(e),n=t.visualViewport,r=t.innerWidth,o=t.innerHeight;return n&&/iPhone|iPod|iPad/.test(navigator.platform)&&(r=n.width,o=n.height),{width:r,height:o,x:0,y:0}}(e)):he(t)?pe(t):st(function(e){var t=fe(e),n=de(e),r=we(ve(e),t);return r.height=Math.max(r.height,t.innerHeight),r.width=Math.max(r.width,t.innerWidth),r.x=-n.scrollLeft,r.y=-n.scrollTop,r}(ve(e)))}function ct(e,t,n){var r="clippingParents"===t?function(e){var t=Ce(e),n=["absolute","fixed"].indexOf(be(e).position)>=0&&he(e)?ke(e):e;return me(n)?t.filter((function(e){return me(e)&&it(e,n)})):[]}(e):[].concat(t),o=[].concat(r,[n]),a=o[0],i=o.reduce((function(t,n){var r=lt(e,n),o=at(he(n)?n:ve(e));return t.top=Math.max(r.top+o.top,t.top),t.right=Math.min(r.right-o.right,t.right),t.bottom=Math.min(r.bottom-o.bottom,t.bottom),t.left=Math.max(r.left+o.left,t.left),t}),lt(e,a));return i.width=i.right-i.left,i.height=i.bottom-i.top,i.x=i.left,i.y=i.top,i}function ut(e){return Object.assign({},{top:0,right:0,bottom:0,left:0},{},e)}function pt(e,t){return t.reduce((function(t,n){return t[n]=e,t}),{})}function ft(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=void 0===r?e.placement:r,a=n.boundary,i=void 0===a?Fe:a,s=n.rootBoundary,l=void 0===s?Ae:s,c=n.elementContext,u=void 0===c?He:c,p=n.altBoundary,f=void 0!==p&&p,d=n.padding,m=void 0===d?0:d,h=ut("number"!=typeof m?m:pt(m,ze)),g=u===He?We:He,v=e.elements.reference,y=e.rects.popper,b=e.elements[f?g:u],E=ct(me(b)?b:b.contextElement||ve(e.elements.popper),i,l),w=pe(v),P=Xe({reference:w,element:y,strategy:"absolute",placement:o}),x=st(Object.assign({},y,{},P)),C=u===He?x:w,O={top:E.top-C.top+h.top,bottom:C.bottom-E.bottom+h.bottom,left:E.left-C.left+h.left,right:C.right-E.right+h.right},S=e.modifiersData.offset;if(u===He&&S){var k=S[o];Object.keys(O).forEach((function(e){var t=[_e,Te].indexOf(e)>=0?1:-1,n=[Ne,Te].indexOf(e)>=0?"y":"x";O[e]+=k[n]*t}))}return O}function dt(e,t,n){return Math.max(e,Math.min(t,n))}function mt(e,t,n){return void 0===n&&(n={x:0,y:0}),{top:e.top-t.height-n.y,right:e.right-t.width+n.x,bottom:e.bottom-t.height+n.y,left:e.left-t.width-n.x}}function ht(e){return[Ne,_e,Te,De].some((function(t){return e[t]>=0}))}var gt=qe({defaultModifiers:[{name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(e){var t=e.state,n=e.instance,r=e.options,o=r.scroll,a=void 0===o||o,i=r.resize,s=void 0===i||i,l=fe(t.elements.popper),c=[].concat(t.scrollParents.reference,t.scrollParents.popper);return a&&c.forEach((function(e){e.addEventListener("scroll",n.update,Ve)})),s&&l.addEventListener("resize",n.update,Ve),function(){a&&c.forEach((function(e){e.removeEventListener("scroll",n.update,Ve)})),s&&l.removeEventListener("resize",n.update,Ve)}},data:{}},{name:"popperOffsets",enabled:!0,phase:"read",fn:function(e){var t=e.state,n=e.name;t.modifiersData[n]=Xe({reference:t.rects.reference,element:t.rects.popper,strategy:"absolute",placement:t.placement})},data:{}},{name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(e){var t=e.state,n=e.options,r=n.gpuAcceleration,o=void 0===r||r,a=n.adaptive,i=void 0===a||a,s={placement:$e(t.placement),popper:t.elements.popper,popperRect:t.rects.popper,gpuAcceleration:o};null!=t.modifiersData.popperOffsets&&(t.styles.popper=Object.assign({},t.styles.popper,{},Qe(Object.assign({},s,{offsets:t.modifiersData.popperOffsets,position:t.options.strategy,adaptive:i})))),null!=t.modifiersData.arrow&&(t.styles.arrow=Object.assign({},t.styles.arrow,{},Qe(Object.assign({},s,{offsets:t.modifiersData.arrow,position:"absolute",adaptive:!1})))),t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-placement":t.placement})},data:{}},{name:"applyStyles",enabled:!0,phase:"write",fn:function(e){var t=e.state;Object.keys(t.elements).forEach((function(e){var n=t.styles[e]||{},r=t.attributes[e]||{},o=t.elements[e];he(o)&&ge(o)&&(Object.assign(o.style,n),Object.keys(r).forEach((function(e){var t=r[e];!1===t?o.removeAttribute(e):o.setAttribute(e,!0===t?"":t)})))}))},effect:function(e){var t=e.state,n={popper:{position:t.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(t.elements.popper.style,n.popper),t.elements.arrow&&Object.assign(t.elements.arrow.style,n.arrow),function(){Object.keys(t.elements).forEach((function(e){var r=t.elements[e],o=t.attributes[e]||{},a=Object.keys(t.styles.hasOwnProperty(e)?t.styles[e]:n[e]).reduce((function(e,t){return e[t]="",e}),{});he(r)&&ge(r)&&(Object.assign(r.style,a),Object.keys(o).forEach((function(e){r.removeAttribute(e)})))}))}},requires:["computeStyles"]},{name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.offset,a=void 0===o?[0,0]:o,i=Ie.reduce((function(e,n){return e[n]=function(e,t,n){var r=$e(e),o=[De,Ne].indexOf(r)>=0?-1:1,a="function"==typeof n?n(Object.assign({},t,{placement:e})):n,i=a[0],s=a[1];return i=i||0,s=(s||0)*o,[De,_e].indexOf(r)>=0?{x:s,y:i}:{x:i,y:s}}(n,t.rects,a),e}),{}),s=i[t.placement],l=s.x,c=s.y;null!=t.modifiersData.popperOffsets&&(t.modifiersData.popperOffsets.x+=l,t.modifiersData.popperOffsets.y+=c),t.modifiersData[r]=i}},{name:"flip",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name;if(!t.modifiersData[r]._skip){for(var o=n.mainAxis,a=void 0===o||o,i=n.altAxis,s=void 0===i||i,l=n.fallbackPlacements,c=n.padding,u=n.boundary,p=n.rootBoundary,f=n.altBoundary,d=n.flipVariations,m=void 0===d||d,h=n.allowedAutoPlacements,g=t.options.placement,v=$e(g),y=l||(v===g||!m?[tt(g)]:function(e){if($e(e)===je)return[];var t=tt(e);return[rt(e),t,rt(t)]}(g)),b=[g].concat(y).reduce((function(e,n){return e.concat($e(n)===je?function(e,t){void 0===t&&(t={});var n=t,r=n.placement,o=n.boundary,a=n.rootBoundary,i=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?Ie:l,u=Ye(r),p=(u?s?Be:Be.filter((function(e){return Ye(e)===u})):ze).filter((function(e){return c.indexOf(e)>=0})).reduce((function(t,n){return t[n]=ft(e,{placement:n,boundary:o,rootBoundary:a,padding:i})[$e(n)],t}),{});return Object.keys(p).sort((function(e,t){return p[e]-p[t]}))}(t,{placement:n,boundary:u,rootBoundary:p,padding:c,flipVariations:m,allowedAutoPlacements:h}):n)}),[]),E=t.rects.reference,w=t.rects.popper,P=new Map,x=!0,C=b[0],O=0;O<b.length;O++){var S=b[O],k=$e(S),N=Ye(S)===Re,T=[Ne,Te].indexOf(k)>=0,_=T?"width":"height",D=ft(t,{placement:S,boundary:u,rootBoundary:p,altBoundary:f,padding:c}),j=T?N?_e:De:N?Te:Ne;E[_]>w[_]&&(j=tt(j));var z=tt(j),R=[];if(a&&R.push(D[k]<=0),s&&R.push(D[j]<=0,D[z]<=0),R.every((function(e){return e}))){C=S,x=!1;break}P.set(S,R)}if(x)for(var M=function(e){var t=b.find((function(t){var n=P.get(t);if(n)return n.slice(0,e).every((function(e){return e}))}));if(t)return C=t,"break"},F=m?3:1;F>0;F--){if("break"===M(F))break}t.placement!==C&&(t.modifiersData[r]._skip=!0,t.placement=C,t.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}},{name:"preventOverflow",enabled:!0,phase:"main",fn:function(e){var t=e.state,n=e.options,r=e.name,o=n.mainAxis,a=void 0===o||o,i=n.altAxis,s=void 0!==i&&i,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,p=n.padding,f=n.tether,d=void 0===f||f,m=n.tetherOffset,h=void 0===m?0:m,g=ft(t,{boundary:l,rootBoundary:c,padding:p,altBoundary:u}),v=$e(t.placement),y=Ye(t.placement),b=!y,E=Je(v),w="x"===E?"y":"x",P=t.modifiersData.popperOffsets,x=t.rects.reference,C=t.rects.popper,O="function"==typeof h?h(Object.assign({},t.rects,{placement:t.placement})):h,S={x:0,y:0};if(P){if(a){var k="y"===E?Ne:De,N="y"===E?Te:_e,T="y"===E?"height":"width",_=P[E],D=P[E]+g[k],j=P[E]-g[N],z=d?-C[T]/2:0,R=y===Re?x[T]:C[T],M=y===Re?-C[T]:-x[T],F=t.elements.arrow,A=d&&F?Pe(F):{width:0,height:0},H=t.modifiersData["arrow#persistent"]?t.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=H[k],B=H[N],I=dt(0,x[T],A[T]),L=b?x[T]/2-z-I-W-O:R-I-W-O,U=b?-x[T]/2+z+I+B+O:M+I+B+O,G=t.elements.arrow&&ke(t.elements.arrow),K=G?"y"===E?G.clientTop||0:G.clientLeft||0:0,q=t.modifiersData.offset?t.modifiersData.offset[t.placement][E]:0,V=P[E]+L-q-K,$=P[E]+U-q,Y=dt(d?Math.min(D,V):D,_,d?Math.max(j,$):j);P[E]=Y,S[E]=Y-_}if(s){var J="x"===E?Ne:De,X="x"===E?Te:_e,Z=P[w],Q=dt(Z+g[J],Z,Z-g[X]);P[w]=Q,S[w]=Q-Z}t.modifiersData[r]=S}},requiresIfExists:["offset"]},{name:"arrow",enabled:!0,phase:"main",fn:function(e){var t,n=e.state,r=e.name,o=n.elements.arrow,a=n.modifiersData.popperOffsets,i=$e(n.placement),s=Je(i),l=[De,_e].indexOf(i)>=0?"height":"width";if(o&&a){var c=n.modifiersData[r+"#persistent"].padding,u=Pe(o),p="y"===s?Ne:De,f="y"===s?Te:_e,d=n.rects.reference[l]+n.rects.reference[s]-a[s]-n.rects.popper[l],m=a[s]-n.rects.reference[s],h=ke(o),g=h?"y"===s?h.clientHeight||0:h.clientWidth||0:0,v=d/2-m/2,y=c[p],b=g-u[l]-c[f],E=g/2-u[l]/2+v,w=dt(y,E,b),P=s;n.modifiersData[r]=((t={})[P]=w,t.centerOffset=w-E,t)}},effect:function(e){var t=e.state,n=e.options,r=e.name,o=n.element,a=void 0===o?"[data-popper-arrow]":o,i=n.padding,s=void 0===i?0:i;null!=a&&("string"!=typeof a||(a=t.elements.popper.querySelector(a)))&&it(t.elements.popper,a)&&(t.elements.arrow=a,t.modifiersData[r+"#persistent"]={padding:ut("number"!=typeof s?s:pt(s,ze))})},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]},{name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(e){var t=e.state,n=e.name,r=t.rects.reference,o=t.rects.popper,a=t.modifiersData.preventOverflow,i=ft(t,{elementContext:"reference"}),s=ft(t,{altBoundary:!0}),l=mt(i,r),c=mt(s,o,a),u=ht(l),p=ht(c);t.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:p},t.attributes.popper=Object.assign({},t.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":p})}}]}),vt=n(48),yt=n.n(vt),bt=[],Et=function(e,t,n){void 0===n&&(n={});var o=r.useRef(null),a={onFirstUpdate:n.onFirstUpdate,placement:n.placement||"bottom",strategy:n.strategy||"absolute",modifiers:n.modifiers||bt},i=r.useState({styles:{popper:{position:a.strategy,left:"0",top:"0"}},attributes:{}}),s=i[0],l=i[1],c=r.useMemo((function(){return{name:"updateState",enabled:!0,phase:"write",fn:function(e){var t=e.state,n=Object.keys(t.elements);l({styles:le(n.map((function(e){return[e,t.styles[e]||{}]}))),attributes:le(n.map((function(e){return[e,t.attributes[e]]})))})},requires:["computeStyles"]}}),[]),u=r.useMemo((function(){var e={onFirstUpdate:a.onFirstUpdate,placement:a.placement,strategy:a.strategy,modifiers:[].concat(a.modifiers,[c,{name:"applyStyles",enabled:!1}])};return yt()(o.current,e)?o.current||e:(o.current=e,e)}),[a.onFirstUpdate,a.placement,a.strategy,a.modifiers,c]),p=r.useRef();return ce((function(){p.current&&p.current.setOptions(u)}),[u]),ce((function(){if(null!=e&&null!=t){var r=(n.createPopper||gt)(e,t,u);return p.current=r,function(){r.destroy(),p.current=null}}}),[e,t,n.createPopper]),{state:p.current?p.current.state:null,styles:s.styles,attributes:s.attributes,update:p.current?p.current.update:null,forceUpdate:p.current?p.current.forceUpdate:null}},wt=function(){},Pt=function(){return Promise.resolve(null)},xt=[];function Ct(e){var t=e.placement,n=void 0===t?"bottom":t,o=e.strategy,a=void 0===o?"absolute":o,i=e.modifiers,s=void 0===i?xt:i,l=e.referenceElement,c=e.onFirstUpdate,u=e.innerRef,p=e.children,f=r.useContext(ee),d=r.useState(null),m=d[0],h=d[1],g=r.useState(null),v=g[0],y=g[1];r.useEffect((function(){return se(u,m)}),[u,m]);var b=r.useMemo((function(){return{placement:n,strategy:a,onFirstUpdate:c,modifiers:[].concat(s,[{name:"arrow",enabled:null!=v,options:{element:v}}])}}),[n,a,c,s,v]),E=Et(l||f,m,b),w=E.state,P=E.styles,x=E.forceUpdate,C=E.update,O=r.useMemo((function(){return{ref:h,style:P.popper,placement:w?w.placement:n,hasPopperEscaped:w&&w.modifiersData.hide?w.modifiersData.hide.hasPopperEscaped:null,isReferenceHidden:w&&w.modifiersData.hide?w.modifiersData.hide.isReferenceHidden:null,arrowProps:{style:P.arrow,ref:y},forceUpdate:x||wt,update:C||Pt}}),[h,y,n,w,P,C,x]);return ae(p)(O)}var Ot,St,kt=n(46),Nt=n.n(kt),Tt=n(6),_t=(Ot=function(e,t){return(Ot=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}Ot(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),Dt=function(e){function t(t){var n=e.call(this,t)||this,r=n.props,o=r.className,a=r.root,i=void 0===a?document.body:a;return n.node=document.createElement("div"),o&&n.node.classList.add(o),n.portalRoot=i,n.portalRoot.appendChild(n.node),n}return _t(t,e),t.prototype.componentWillUnmount=function(){this.portalRoot.removeChild(this.node)},t.prototype.render=function(){return i.a.createPortal(this.props.children,this.node)},t}(r.PureComponent),jt=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},zt=function(){return(zt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Rt=Object(Tt.stylesFactory)((function(){return{defaultTransitionStyles:Object(Q.css)(St||(St=jt(["\n    transition: opacity 200ms linear;\n    opacity: 0;\n  "],["\n    transition: opacity 200ms linear;\n    opacity: 0;\n  "])))}})),Mt={exited:{opacity:0},entering:{opacity:0},entered:{opacity:1},exiting:{opacity:0}},Ft=function(e){var t=e.show,n=e.placement,r=e.popperClassName,a=e.refClassName,i=e.content,s=e.children,l=e.renderContent,c=Object(Q.cx)("popper_ref",a),u=Rt(),p=Object(Q.cx)("popper",r,u.defaultTransitionStyles);return o.a.createElement(ne,null,o.a.createElement(ue,null,(function(e){var t=e.ref;return o.a.createElement("div",{className:c,ref:t},s)})),o.a.createElement(Nt.a,{in:t,timeout:100,mountOnEnter:!0,unmountOnExit:!0},(function(e){return o.a.createElement(Dt,null,o.a.createElement(Ct,{placement:n},(function(t){var n=t.ref,r=t.style,a=t.placement,s=t.arrowProps;return o.a.createElement("div",{ref:n,style:zt(zt({},r),Mt[e]),"data-placement":a,className:p},o.a.createElement("div",{className:"popper__background"},l(i),o.a.createElement("div",{ref:s.ref,"data-placement":a,className:"popper__arrow"})))})))})))},At=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ht=function(){return(Ht=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Wt=function(){return(Wt=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Bt=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},It=function(e){var t;return(t=function(t){function n(e){var n=t.call(this,e)||this;return n.showPopper=function(){n.setState({show:!0})},n.hidePopper=function(){n.setState({show:!1})},n.state={show:!1},n}return At(n,t),n.prototype.renderContent=function(e){if("function"==typeof e){var t=e;return o.a.createElement(t,null)}return e},n.prototype.render=function(){var t=this.state.show,n=this.props,r=n.placement,a=n.className;return o.a.createElement(e,Ht({},this.props,{showPopper:this.showPopper,hidePopper:this.hidePopper,renderContent:this.renderContent,placement:r,className:a,show:t}))},n}(o.a.Component)).defaultProps={placement:"auto"},t}((function(e){var t=e.hidePopper,n=e.showPopper,r=e.className,a=e.children,i=Bt(e,["hidePopper","showPopper","className","children"]);return o.a.createElement("div",{className:"popper__manager "+r,onMouseEnter:n,onMouseLeave:t},o.a.createElement(Ft,Wt({},i),a))})),Lt=It,Ut=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Gt=["#E24D42","#1F78C1","#BA43A9","#705DA0","#466803","#508642","#447EBC","#C15C17","#890F02","#757575","#0A437C","#6D1F62","#584477","#629E51","#2F4F4F","#BF1B00","#806EB7","#8a2eb8","#699e00","#000000","#3F6833","#2F575E","#99440A","#E0752D","#0E4AB4","#58140C","#052B51","#511749","#3F2B5B"],Kt=["#FF7368","#459EE7","#E069CF","#9683C6","#6C8E29","#76AC68","#6AA4E2","#E7823D","#AF3528","#9B9B9B","#3069A2","#934588","#7E6A9D","#88C477","#557575","#E54126","#A694DD","#B054DE","#8FC426","#262626","#658E59","#557D84","#BF6A30","#FF9B53","#3470DA","#7E3A32","#2B5177","#773D6F","#655181"];var qt,Vt,$t,Yt,Jt,Xt,Zt,Qt,en,tn,nn=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick&&t.props.onClick(t.props.tag,e.ctrlKey,e.shiftKey)},t}return Ut(t,e),t.prototype.render=function(){var e=this.props,t=e.tag,n=e.highlight,r=function(e){var t=function(e){for(var t=5381,n=0;n<e.length;n++)t=(t<<5)+t+e.charCodeAt(n);return t}(e.toLowerCase());return{color:Gt[Math.abs(t%Gt.length)],borderColor:Kt[Math.abs(t%Kt.length)]}}(t.tag),a={background:r.color,borderColor:r.borderColor};return o.a.createElement(Lt,{placement:"bottom",content:"Click to add tag filter or Ctrl/Shift+click to remove"},o.a.createElement("span",{className:"label label-tag zbx-tag "+(n?"highlighted":""),style:a,onClick:this.handleClick},t.value?t.tag+": "+t.value:""+t.tag))},t}(r.PureComponent),rn=n(3),on=n(4),an=function(e){var t=e.status,n=e.className,r=Object(Q.cx)(n,"icon-gf",{"icon-gf-critical":"critical"===t||"problem"===t||"warning"===t},{"icon-gf-online":"online"===t||"ok"===t});return o.a.createElement("i",{className:r})},sn=function(e){var t=e.icon,n=e.customClass,r=Object(Q.cx)(n,"fa-icon-container");return o.a.createElement("span",{className:r},o.a.createElement("i",{className:"fa fa-"+t}))},ln=sn,cn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},un=function(e){var t=e.icon,n=e.width,r=e.tooltip,a=e.className,i=e.children,s=e.onClick,l=Object(Tt.useTheme)(),c=pn(l),u=Object(Q.cx)("btn",c.button,Object(Q.css)(qt||(qt=cn(["width: ","rem"],["width: ","rem"])),n||3),a),p=o.a.createElement("button",{className:u,onClick:s},t&&o.a.createElement(sn,{icon:t,customClass:c.icon}),i);return r&&(p=o.a.createElement(It,{placement:"bottom",content:r},p)),p},pn=Object(Tt.stylesFactory)((function(e){var t=e.type===u.GrafanaThemeType.Light?"#497dc0":"#005f81",n=e.type===u.GrafanaThemeType.Light?"#456ba4":"#354f77";return{button:Object(Q.css)(Vt||(Vt=cn(["\n      height: 2rem;\n      background-image: none;\n      background-color: ",";\n      border: 1px solid ",";\n      border-radius: 1px;\n      color: ",";\n\n      i {\n        vertical-align: middle;\n      }\n\n      &:hover {\n        background-color: ",";\n      }\n    "],["\n      height: 2rem;\n      background-image: none;\n      background-color: ",";\n      border: 1px solid ",";\n      border-radius: 1px;\n      color: ",";\n\n      i {\n        vertical-align: middle;\n      }\n\n      &:hover {\n        background-color: ",";\n      }\n    "])),t,e.colors.gray1||e.palette.gray1,e.colors.text,n),icon:Object(Q.css)($t||($t=cn(["\n      i {\n        color: ",";\n      }\n    "],["\n      i {\n        color: ",";\n      }\n    "])),e.colors.text)}})),fn=function(e){var t=e.className,n=e.onClick;return o.a.createElement(un,{className:t,icon:"reply-all",tooltip:"Acknowledge problem",onClick:n})},dn=function(e){var t=e.problem,n=e.panelId;return o.a.createElement(un,{icon:"compass",width:6,onClick:function(){return mn(t,n)}},"Explore")},mn=function(e,t){var n,r,o,a={};if(1===(null===(n=e.items)||void 0===n?void 0:n.length)&&1===(null===(r=e.hosts)||void 0===r?void 0:r.length)){var i=e.items[0],s=e.hosts[0],l=Object(rn.e)(i.name,i.key_);a={queryType:on.f,group:{filter:"/.*/"},application:{filter:""},host:{filter:s.name},item:{filter:l}}}else{var u=null===(o=e.items)||void 0===o?void 0:o.map((function(e){return e.itemid})).join(",");a={queryType:on.d,itemids:u}}var p={datasource:e.datasource,context:"explore",originPanelId:t,queries:[a]},f=JSON.stringify(p),d=Object(Z.d)("/explore",{left:f});Object(c.getLocationSrv)().update({path:d,query:{}})},hn=function(){return(hn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},gn=o.a.createContext(c.config),vn=gn.Consumer,yn=function(){return Object(Tt.getTheme)(c.config.bootData.user.lightTheme?u.GrafanaThemeType.Light:u.GrafanaThemeType.Dark)},bn=function(e){var t=e.children;return o.a.createElement(vn,null,(function(e){return o.a.createElement(Tt.ThemeContext.Provider,{value:yn()},t)}))},En=function(e){return function(e){return function(t){return o.a.createElement(gn.Provider,{value:c.config},o.a.createElement(e,hn({},t)))}}((function(t){return o.a.createElement(bn,null,o.a.createElement(e,hn({},t)))}))},wn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Pn=function(e){function t(t){var n=e.call(this,t)||this;return n.modalRoot=document.body,n.modalNode=document.createElement("div"),n.showModal=function(e,t){n.setState({component:e,props:t})},n.hideModal=function(){n.modalRoot.removeChild(n.modalNode),n.setState({component:null,props:{}})},n.state={component:null,props:{}},n}return wn(t,e),t.prototype.renderModal=function(){var e=this.state,t=e.component,n=e.props;if(!t)return null;this.modalRoot.appendChild(this.modalNode);var r=o.a.createElement(En(t),n);return i.a.createPortal(r,this.modalNode)},t.prototype.render=function(){var e=this.props.children;return o.a.createElement(o.a.Fragment,null,o.a.createElement(e,{showModal:this.showModal,hideModal:this.hideModal}),this.renderModal())},t}(o.a.Component),xn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Cn=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},On=(null===Tt.Forms||void 0===Tt.Forms?void 0:Tt.Forms.Checkbox)||Tt.Checkbox,Sn=(null===Tt.Forms||void 0===Tt.Forms?void 0:Tt.Forms.RadioButtonGroup)||Tt.RadioButtonGroup,kn=13,Nn=27,Tn=[{value:0,label:"Not classified"},{value:1,label:"Information"},{value:2,label:"Warning"},{value:3,label:"Average"},{value:4,label:"High"},{value:5,label:"Disaster"}],_n=function(e){function t(t){var n=e.call(this,t)||this;return n.handleChange=function(e){n.setState({value:e.target.value,error:!1})},n.handleKeyUp=function(e){e.which===kn||"Enter"===e.key?n.submit():e.which!==Nn&&"Escape"!==e.key||n.dismiss()},n.handleBackdropClick=function(){n.dismiss()},n.onAcknowledgeToggle=function(){n.setState({acknowledge:!n.state.acknowledge,error:!1})},n.onChangeSeverityToggle=function(){n.setState({changeSeverity:!n.state.changeSeverity,error:!1})},n.onCloseProblemToggle=function(){n.setState({closeProblem:!n.state.closeProblem,error:!1})},n.onChangeSelectedSeverity=function(e){n.setState({selectedSeverity:e})},n.dismiss=function(){n.setState({value:"",error:!1,errorMessage:"",ackError:"",loading:!1}),n.props.onDismiss()},n.submit=function(){var e=n.state,t=e.acknowledge,r=e.changeSeverity,o=e.closeProblem,a=t||r||o;if(!n.state.value&&!a)return n.setState({error:!0,errorMessage:"Enter message text or select an action"});n.setState({ackError:"",loading:!0});var i={message:n.state.value},s=on.o;n.state.acknowledge&&(s+=on.n),n.state.changeSeverity&&(s+=on.p,i.severity=n.state.selectedSeverity),n.state.closeProblem&&(s+=on.q),i.action=s,n.props.onSubmit(i).then((function(){n.dismiss()})).catch((function(e){n.setState({ackError:e.message||e.data,loading:!1})}))},n.state={value:"",error:!1,errorMessage:"",ackError:"",acknowledge:!1,closeProblem:!1,changeSeverity:!1,selectedSeverity:t.severity||0,loading:!1},n}return xn(t,e),t.prototype.renderActions=function(){var e=this.props.canClose;return[o.a.createElement(On,{key:"ack",label:"Acknowledge",value:this.state.acknowledge,onChange:this.onAcknowledgeToggle}),o.a.createElement(On,{key:"change-severity",label:"Change severity",description:"",value:this.state.changeSeverity,onChange:this.onChangeSeverityToggle}),this.state.changeSeverity&&o.a.createElement(Sn,{key:"severity",size:"sm",options:Tn,value:this.state.selectedSeverity,onChange:this.onChangeSelectedSeverity}),e&&o.a.createElement(On,{key:"close",label:"Close problem",disabled:!e,value:this.state.closeProblem,onChange:this.onCloseProblemToggle})].filter((function(e){return e}))},t.prototype.render=function(){var e=this.props.theme,t=Dn(e),n=Object(Q.cx)(t.modal),r=Object(Q.cx)(t.modalHeaderTitle),a=Object(Q.cx)("gf-form",t.inputGroup),i=Object(Q.cx)(this.state.error&&t.input),s=Object(Q.cx)("gf-form-hint-text",t.inputHint),l=Object(Q.cx)("gf-form-hint-text",t.inputError);return o.a.createElement(Tt.Modal,{isOpen:!0,onDismiss:this.dismiss,className:n,title:o.a.createElement("div",{className:r},this.state.loading?o.a.createElement(Tt.Spinner,{size:18}):o.a.createElement(sn,{icon:"reply-all"}),o.a.createElement("span",{className:"p-l-1"},"Acknowledge Problem"))},o.a.createElement("div",{className:a},o.a.createElement("label",{className:"gf-form-hint"},o.a.createElement(Tt.Input,{className:i,type:"text",name:"message",placeholder:"Message",maxLength:64,autoComplete:"off",autoFocus:!0,value:this.state.value,onChange:this.handleChange,onKeyUp:this.handleKeyUp}),o.a.createElement("small",{className:s},"Press Enter to submit"),this.state.error&&o.a.createElement("small",{className:l},this.state.errorMessage))),o.a.createElement("div",{className:"gf-form"},o.a.createElement(Tt.VerticalGroup,null,this.renderActions())),this.state.ackError&&o.a.createElement("div",{className:"gf-form ack-request-error"},o.a.createElement("span",{className:t.ackError},this.state.ackError)),o.a.createElement("div",{className:"gf-form-button-row text-center"},o.a.createElement(Tt.Button,{variant:"primary",onClick:this.submit},"Update"),o.a.createElement(Tt.Button,{variant:"secondary",onClick:this.dismiss},"Cancel")))},t.defaultProps={withBackdrop:!0},t}(r.PureComponent),Dn=Object(Tt.stylesFactory)((function(e){var t=e.colors.red||e.palette.red;return{modal:Object(Q.css)(Yt||(Yt=Cn(["\n      width: 500px;\n    "],["\n      width: 500px;\n    "]))),modalHeaderTitle:Object(Q.css)(Jt||(Jt=Cn(["\n      font-size: ",";\n      padding-top: ",";\n      margin: 0 ",";\n      display: flex;\n    "],["\n      font-size: ",";\n      padding-top: ",";\n      margin: 0 ",";\n      display: flex;\n    "])),e.typography.heading.h3,e.spacing.sm,e.spacing.md),inputGroup:Object(Q.css)(Xt||(Xt=Cn(["\n      margin-bottom: 16px;\n    "],["\n      margin-bottom: 16px;\n    "]))),input:Object(Q.css)(Zt||(Zt=Cn(["\n      border-color: ",";\n      border-radius: 2px;\n      outline-offset: 2px;\n      box-shadow: 0 0 0 2px ",", 0 0 0px 4px ",";\n    "],["\n      border-color: ",";\n      border-radius: 2px;\n      outline-offset: 2px;\n      box-shadow: 0 0 0 2px ",", 0 0 0px 4px ",";\n    "])),t,e.colors.pageBg||e.colors.bg1,t),inputHint:Object(Q.css)(Qt||(Qt=Cn(["\n      display: inherit;\n      float: right;\n      color: ",";\n    "],["\n      display: inherit;\n      float: right;\n      color: ",";\n    "])),e.colors.textWeak),inputError:Object(Q.css)(en||(en=Cn(["\n      float: left;\n      color: ",";\n    "],["\n      float: left;\n      color: ",";\n    "])),t),ackError:Object(Q.css)(tn||(tn=Cn(["\n      color: ",";\n    "],["\n      color: ",";\n    "])),t)}})),jn=Object(Tt.withTheme)(_n);function zn(e){var t=e.problem,n=e.alerts,r=e.className,a="1"===t.type,i=t.url&&""!==t.url,s=t.maintenance,l="1"===t.manual_close,c=t.error&&""!==t.error,u="1"===t.state,p="1"===t.correlation_mode,f=n&&0!==n.length,d=f?n[0].message:"";return o.a.createElement("div",{className:"problem-statusbar "+(r||"")},o.a.createElement(Rn,{icon:"wrench",fired:s,tooltip:"Host maintenance"}),o.a.createElement(Rn,{icon:"globe",fired:i,link:i&&t.url,tooltip:"External link"}),o.a.createElement(Rn,{icon:"bullhorn",fired:a,tooltip:"Trigger generates multiple problem events"}),o.a.createElement(Rn,{icon:"tag",fired:p,tooltip:"OK event closes problems matched to tag: "+t.correlation_tag}),o.a.createElement(Rn,{icon:"circle-o-notch",fired:f,tooltip:d}),o.a.createElement(Rn,{icon:"question-circle",fired:u,tooltip:"Current trigger state is unknown"}),o.a.createElement(Rn,{icon:"warning",fired:c,tooltip:t.error}),o.a.createElement(Rn,{icon:"window-close-o",fired:l,tooltip:"Manual close problem"}))}function Rn(e){var t=e.fired,n=e.icon,r=e.link,a=e.tooltip,i=o.a.createElement("div",{className:"problem-statusbar-item "+(t?"fired":"muted")},o.a.createElement(ln,{icon:n}));return a&&t&&(i=o.a.createElement(Lt,{placement:"bottom",content:a},i)),r?o.a.createElement("a",{href:r,target:"_blank"},i):i}function Mn(e){var t=e.acknowledges;return o.a.createElement("div",{className:"problem-ack-list"},o.a.createElement("div",{className:"problem-ack-col problem-ack-time"},t.map((function(e){return o.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-time"},e.time)}))),o.a.createElement("div",{className:"problem-ack-col problem-ack-user"},t.map((function(e){return o.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-user"},e.user)}))),o.a.createElement("div",{className:"problem-ack-col problem-ack-message"},t.map((function(e){return o.a.createElement("span",{key:e.acknowledgeid,className:"problem-ack-message"},e.message)}))))}var Fn=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),An=function(){return(An=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Hn=Math.round(9.6),Wn=function(e){function t(t){var n=e.call(this,t)||this;return n.setRootRef=function(e){n.rootRef=e;var t=e&&e.clientWidth||0;n.setState({width:t})},n.handlePointHighlight=function(e,t){var r,o=n.sortedEvents[e],a=n.getRegionToHighlight(e);void 0!==t&&(r=n.getEventDuration(e,t)),n.setState({highlightedEvent:o,showEventInfo:!0,highlightedRegion:a,eventInfo:{duration:r}})},n.handlePointUnHighlight=function(){n.setState({showEventInfo:!1,highlightedRegion:null})},n.handleAckHighlight=function(e,t){n.setState({showEventInfo:!0,eventInfo:{timestamp:Number(e.clock),message:e.message}})},n.handleAckUnHighlight=function(){n.setState({showEventInfo:!1})},n.showEventInfo=function(e){n.setState({highlightedEvent:e,showEventInfo:!0})},n.hideEventInfo=function(){n.setState({showEventInfo:!1})},n.getRegionToHighlight=function(e){return"1"===n.sortedEvents[e].value?e+1:e},n.state={width:0,highlightedEvent:null,highlightedRegion:null,showEventInfo:!1,eventInfo:{}},n}return Fn(t,e),t.prototype.componentDidUpdate=function(e,t){if(this.rootRef&&t.width!==this.rootRef.clientWidth){var n=this.rootRef.clientWidth;this.setState({width:n})}},t.prototype.getEventDuration=function(e,t){return 1e3*Math.abs(Number(this.sortedEvents[e].clock)-Number(this.sortedEvents[t].clock))},t.prototype.sortEvents=function(){var e=l.a.sortBy(this.props.events,(function(e){return Number(e.clock)}));return this.sortedEvents=e,e},t.prototype.getEventAcks=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var o=r[n];if(o.acknowledges)for(var a=0,i=o.acknowledges;a<i.length;a++){var s=i[a];t.push(s)}}return l.a.sortBy(t,(function(e){return Number(e.clock)}))},t.prototype.render=function(){if(!this.rootRef)return o.a.createElement("div",{className:"event-timeline",ref:this.setRootRef});var e=this.props,t=e.timeRange,n=e.eventPointSize,r=e.eventRegionHeight,a=this.sortEvents(),i=this.getEventAcks(a),s=this.state.width+n,l=Math.round(2.5*n),c=s-n,u=Math.round(n/2),p=r/2,f=Math.round(l/2-n/2);return o.a.createElement("div",{className:"event-timeline",ref:this.setRootRef,style:{transform:"translate("+-u+"px, 0)"}},o.a.createElement(In,{className:"timeline-info-container",event:this.state.highlightedEvent,eventInfo:this.state.eventInfo,show:this.state.showEventInfo,left:u}),o.a.createElement("svg",{className:"event-timeline-canvas",viewBox:"0 0 "+s+" "+l},o.a.createElement("defs",null,o.a.createElement(Bn,null)),o.a.createElement("g",{className:"event-timeline-group",transform:"translate("+u+", "+f+")"},o.a.createElement("g",{className:"event-timeline-regions",filter:"url(#boxShadow)"},o.a.createElement(Ln,{events:a,timeRange:t,width:c,height:r,highlightedRegion:this.state.highlightedRegion})),o.a.createElement("g",{className:"timeline-acknowledges",transform:"translate(0, "+p+")"},o.a.createElement(Kn,{acknowledges:i,timeRange:t,width:c,size:n,onHighlight:this.handleAckHighlight,onUnHighlight:this.handleAckUnHighlight})),o.a.createElement("g",{className:"timeline-points",transform:"translate(0, "+p+")"},o.a.createElement(Un,{events:a,timeRange:t,width:c,pointSize:n,onPointHighlight:this.handlePointHighlight,onPointUnHighlight:this.handlePointUnHighlight})))))},t.defaultProps={okColor:"rgb(56, 189, 113)",problemColor:"rgb(215, 0, 0)",eventRegionHeight:Hn,eventPointSize:16},t}(r.PureComponent);function Bn(){return o.a.createElement(o.a.Fragment,null,o.a.createElement("filter",{id:"dropShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"2"}),o.a.createElement("feOffset",{dx:"1",dy:"1"}),o.a.createElement("feMerge",null,o.a.createElement("feMergeNode",null),o.a.createElement("feMergeNode",{in:"SourceGraphic"}))),o.a.createElement("filter",{id:"boxShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceAlpha",stdDeviation:"1"}),o.a.createElement("feComponentTransfer",null,o.a.createElement("feFuncA",{type:"linear",slope:"0.7"})),o.a.createElement("feOffset",{dx:"1",dy:"1"}),o.a.createElement("feMerge",null,o.a.createElement("feMergeNode",null),o.a.createElement("feMergeNode",{in:"SourceGraphic"}))),o.a.createElement("filter",{id:"glowShadow",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2"}),o.a.createElement("feMerge",null,o.a.createElement("feMergeNode",null),o.a.createElement("feMergeNode",{in:"SourceGraphic"}))),o.a.createElement("filter",{id:"timelinePointBlur",x:"-50%",y:"-50%",width:"200%",height:"200%"},o.a.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"2",result:"blurOut"})))}var In=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fn(t,e),t.prototype.render=function(){var e,t,n=this.props,r=n.event,a=n.eventInfo,i=n.show,s=n.className,l=n.left;if(r){var c=X()(1e3*Number(r.clock)).format("HH:mm:ss");e=[o.a.createElement("span",{key:"ts",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Time: "),o.a.createElement("span",{className:"event-timestamp-value"},c))]}if(a&&a.duration){var u=a.duration,p=X.a.utc(u).format("HH:mm:ss");t=o.a.createElement("span",{key:"duration",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Duration: "),o.a.createElement("span",{className:"event-timestamp-value"},p))}if(a&&a.timestamp){c=X()(1e3*a.timestamp).format("HH:mm:ss");e=[o.a.createElement("span",{key:"ts",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Time: "),o.a.createElement("span",{className:"event-timestamp-value"},c))]}var f={left:l};return i||(f.opacity=0),o.a.createElement("div",{className:s,style:f},o.a.createElement("div",null,e),o.a.createElement("div",null,t),a&&a.message&&o.a.createElement("div",null,o.a.createElement("span",{key:"duration",className:"event-timestamp"},o.a.createElement("span",{className:"event-timestamp-label"},"Message: "),o.a.createElement("span",{className:"event-timestamp-value"},a.message))))},t.defaultProps={left:0,className:"",show:!1},t}(r.PureComponent),Ln=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Fn(t,e),t.prototype.render=function(){var e,t=this.props,n=t.events,r=t.timeRange,a=t.width,i=t.height,s=t.highlightedRegion,l=r.timeFrom,c=r.timeTo,u=c-l;if(n.length){var p=((n.length?Number(n[0].clock):c)-l)/u,f=Math.round(p*a),d=0===s,m="problem-event-region "+("problem-event--"+("1"!==n[0].value?"problem":"ok"))+" "+(d?"highlighted":""),h={x:0,y:0,width:f,height:i};e=o.a.createElement("rect",An({key:"0",className:m},h))}return[e,n.map((function(e,t){var r=Number(e.clock),p=((t<n.length-1?Number(n[t+1].clock):c)-r)/u,f=Math.round(p*a),d=Math.round((r-l)/u*a),m=s&&s-1===t,h="problem-event-region "+("problem-event--"+("1"===e.value?"problem":"ok"))+" "+(m?"highlighted":""),g={x:d,y:0,width:f,height:i};return o.a.createElement("rect",An({key:e.eventid+"-"+t,className:h},g))}))]},t.defaultProps={highlightedRegion:null},t}(r.PureComponent),Un=function(e){function t(t){var n=e.call(this,t)||this;return n.bringToFront=function(e,t){void 0===t&&(t=!1);var r=n.props.events.map((function(e,t){return t}));r=Vn(r,e);var o=t?e:null;n.setState({order:r,highlighted:o})},n.highlightPoint=function(e){return function(){var t=[e];if(n.props.onPointHighlight)if(n.props.highlightRegion){var r=2===(t=n.getRegionEvents(e)).length?t[1]:void 0;n.props.onPointHighlight(e,r)}else n.props.onPointHighlight(e);n.bringToFront(t,!0)}},n.unHighlightPoint=function(e){return function(){n.props.onPointUnHighlight&&n.props.onPointUnHighlight();var e=n.props.events.map((function(e,t){return t}));n.setState({order:e,highlighted:[]})}},n.state={order:[],highlighted:[]},n}return Fn(t,e),t.prototype.getRegionEvents=function(e){var t=this.props.events,n=t[e];if("1"===n.value&&e<t.length)for(var r=e;r<t.length;r++){if("0"===t[r].value)return[e,r]}else if("0"===n.value&&e>0){var o=null;for(r=e-1;r>=0&&"1"===t[r].value;r--)o=r;if(null!==o)return[e,o]}return[e]},t.prototype.render=function(){var e=this,t=this.props,n=t.events,r=t.timeRange,a=t.width,i=t.pointSize,s=r.timeFrom,l=r.timeTo-s,c=i/2,u=n.map((function(t,n){var r=Number(t.clock),i=Math.round((r-s)/l*a-c),u="problem-event-item problem-event--"+("1"===t.value?"problem":"ok"),p=-1!==e.state.highlighted.indexOf(n);return o.a.createElement(Gn,{key:t.eventid+"-"+n,className:u,x:i,r:c,highlighted:p,onPointHighlight:e.highlightPoint(n),onPointUnHighlight:e.unHighlightPoint(n)})}));return this.state.order.length?this.state.order.map((function(e){return u[e]})):u},t.defaultProps={highlightRegion:!0},t}(r.PureComponent),Gn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleMouseOver=function(){n.props.onPointHighlight&&n.props.onPointHighlight()},n.handleMouseLeave=function(){n.props.onPointUnHighlight&&n.props.onPointUnHighlight()},n.state={highlighted:!1},n}return Fn(t,e),t.prototype.componentDidUpdate=function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})},t.prototype.render=function(){var e=this.props.x,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),a=(this.props.className||"")+" "+(this.state.highlighted?"highlighted":"");return o.a.createElement("g",{className:a,transform:"translate("+n+", 0)",filter:"url(#dropShadow)",onMouseOver:this.handleMouseOver,onMouseLeave:this.handleMouseLeave},o.a.createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),o.a.createElement("circle",{cx:0,cy:0,r:r,className:"point-core"}))},t}(r.PureComponent),Kn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHighlight=function(e){return function(){if(n.props.onHighlight){var t=n.props.acknowledges[e];n.props.onHighlight(t,e)}n.bringToFront(e,!0)}},n.handleUnHighlight=function(){n.props.onUnHighlight&&n.props.onUnHighlight();var e=n.props.acknowledges.map((function(e,t){return t}));n.setState({order:e,highlighted:null})},n.bringToFront=function(e,t){void 0===t&&(t=!1);var r=n.props.acknowledges.map((function(e,t){return t}));r=Vn(r,[e]);var o=t?e:null;n.setState({order:r,highlighted:o})},n.state={order:[],highlighted:null},n}return Fn(t,e),t.prototype.render=function(){var e=this,t=this.props,n=t.acknowledges,r=t.timeRange,a=t.width,i=t.size,s=r.timeFrom,l=r.timeTo-s,c=i/2,u=n.map((function(t,n){var r=Number(t.clock),i=Math.round((r-s)/l*a-c),u=e.state.highlighted===n;return o.a.createElement(qn,{key:t.eventid+"-"+n,x:i,r:c,highlighted:u,onHighlight:e.handleHighlight(n),onUnHighlight:e.handleUnHighlight})}));return this.state.order.length?this.state.order.map((function(e){return u[e]})):u},t}(r.PureComponent),qn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleHighlight=function(){n.props.onHighlight&&n.props.onHighlight()},n.handleUnHighlight=function(){n.props.onUnHighlight&&n.props.onUnHighlight()},n.state={highlighted:!1},n}return Fn(t,e),t.prototype.componentDidUpdate=function(e){e.highlighted!==this.props.highlighted&&this.setState({highlighted:this.props.highlighted})},t.prototype.render=function(){var e=this.props.x,t=this.state.highlighted?Math.round(1.1*this.props.r):this.props.r,n=e+this.props.r,r=Math.round(.6*t),a="problem-event-ack "+(this.state.highlighted?"highlighted":"");return o.a.createElement("g",{className:a,transform:"translate("+n+", 0)",filter:"url(#dropShadow)",onMouseOver:this.handleHighlight,onMouseLeave:this.handleUnHighlight},o.a.createElement("circle",{cx:0,cy:0,r:t,className:"point-border"}),o.a.createElement("circle",{cx:0,cy:0,r:r,className:"point-core"}))},t}(r.PureComponent);function Vn(e,t){var n=l.a.pullAt(e,t);return n.reverse(),e.push.apply(e,n),e}var $n=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yn=function(e){function t(t){var n=e.call(this,t)||this;return n.handleTagClick=function(e,t,r){n.props.onTagClick&&n.props.onTagClick(e,n.props.original.datasource,t,r)},n.ackProblem=function(e){var t=n.props.original;return n.props.onProblemAck(t,e)},n.state={events:[],alerts:[],show:!1},n}return $n(t,e),t.prototype.componentDidMount=function(){var e=this;this.props.showTimeline&&this.fetchProblemEvents(),this.fetchProblemAlerts(),requestAnimationFrame((function(){e.setState({show:!0})}))},t.prototype.fetchProblemEvents=function(){var e=this,t=this.props.original;this.props.getProblemEvents(t).then((function(t){e.setState({events:t})}))},t.prototype.fetchProblemAlerts=function(){var e=this,t=this.props.original;this.props.getProblemAlerts(t).then((function(t){e.setState({alerts:t})}))},t.prototype.render=function(){var e=this,t=this.props.original,n=this.state.alerts,r=this.props.rootWidth,a=this.state.show?"show":"",i=r>1200,s=r<800||t.acknowledges&&i&&r<1400,l=X.a.unix(t.timestamp).fromNow(!0),c=t.acknowledges&&0!==t.acknowledges.length,u=Number(t.severity);return o.a.createElement("div",{className:"problem-details-container "+a},o.a.createElement("div",{className:"problem-details"},o.a.createElement("div",{className:"problem-details-row"},o.a.createElement("div",{className:"problem-value-container"},o.a.createElement("div",{className:"problem-age"},o.a.createElement(sn,{icon:"clock-o"}),o.a.createElement("span",null,l)),t.items&&o.a.createElement(Zn,{items:t.items})),o.a.createElement("div",{className:"problem-actions-left"},o.a.createElement(dn,{problem:t,panelId:this.props.panelId})),o.a.createElement(zn,{problem:t,alerts:n,className:s&&"compact"}),t.showAckButton&&o.a.createElement("div",{className:"problem-actions"},o.a.createElement(Pn,null,(function(n){var r=n.showModal,a=n.hideModal;return o.a.createElement(fn,{className:"navbar-button navbar-button--settings",onClick:function(){r(jn,{canClose:"1"===t.manual_close,severity:u,onSubmit:e.ackProblem,onDismiss:a})}})})))),t.comments&&o.a.createElement("div",{className:"problem-description-row"},o.a.createElement("div",{className:"problem-description"},o.a.createElement("span",{className:"description-label"},"Description: "),o.a.createElement("span",null,t.comments))),t.tags&&t.tags.length>0&&o.a.createElement("div",{className:"problem-tags"},t.tags&&t.tags.map((function(n){return o.a.createElement(nn,{key:n.tag+n.value,tag:n,highlight:n.tag===t.correlation_tag,onClick:e.handleTagClick})}))),this.props.showTimeline&&this.state.events.length>0&&o.a.createElement(Wn,{events:this.state.events,timeRange:this.props.timeRange}),c&&!i&&o.a.createElement("div",{className:"problem-ack-container"},o.a.createElement("h6",null,o.a.createElement(sn,{icon:"reply-all"})," Acknowledges"),o.a.createElement(Mn,{acknowledges:t.acknowledges}))),c&&i&&o.a.createElement("div",{className:"problem-details-middle"},o.a.createElement("div",{className:"problem-ack-container"},o.a.createElement("h6",null,o.a.createElement(sn,{icon:"reply-all"})," Acknowledges"),o.a.createElement(Mn,{acknowledges:t.acknowledges}))),o.a.createElement("div",{className:"problem-details-right"},o.a.createElement("div",{className:"problem-details-right-item"},o.a.createElement(sn,{icon:"database"}),o.a.createElement("span",null,t.datasource)),t.proxy&&o.a.createElement("div",{className:"problem-details-right-item"},o.a.createElement(sn,{icon:"cloud"}),o.a.createElement("span",null,t.proxy)),t.groups&&o.a.createElement(Qn,{groups:t.groups,className:"problem-details-right-item"}),t.hosts&&o.a.createElement(er,{hosts:t.hosts,className:"problem-details-right-item"})))},t}(r.PureComponent);function Jn(e){var t=e.item,n=e.showName,r=rn.e(t.name,t.key_);return o.a.createElement(It,{placement:"bottom",content:r},o.a.createElement("div",{className:"problem-item"},o.a.createElement(sn,{icon:"thermometer-three-quarters"}),n&&o.a.createElement("span",{className:"problem-item-name"},t.name,": "),o.a.createElement("span",{className:"problem-item-value"},t.lastvalue)))}var Xn,Zn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $n(t,e),t.prototype.render=function(){var e=this.props.items;return e.length>1?e.map((function(e){return o.a.createElement(Jn,{item:e,key:e.itemid,showName:!0})})):o.a.createElement(Jn,{item:e[0]})},t}(r.PureComponent),Qn=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $n(t,e),t.prototype.render=function(){var e=this;return this.props.groups.map((function(t){return o.a.createElement("div",{className:e.props.className||"",key:t.groupid},o.a.createElement(sn,{icon:"folder"}),o.a.createElement("span",null,t.name))}))},t}(r.PureComponent),er=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return $n(t,e),t.prototype.render=function(){var e=this;return this.props.hosts.map((function(t){return o.a.createElement("div",{className:e.props.className||"",key:t.hostid},o.a.createElement(sn,{icon:"server"}),o.a.createElement("span",null,t.name))}))},t}(r.PureComponent),tr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},nr=Object(Tt.stylesFactory)((function(e){return{countLabel:Object(Q.css)(Xn||(Xn=tr(["\n      font-size: ",";\n    "],["\n      font-size: ",";\n    "])),e.typography.size.sm)}})),rr=function(e){var t,n,r=e.original,a=Object(Tt.useTheme)(),i=nr(a);return o.a.createElement("div",null,(null===(t=r.acknowledges)||void 0===t?void 0:t.length)>0&&o.a.createElement(o.a.Fragment,null,o.a.createElement(sn,{icon:"comments"}),o.a.createElement("span",{className:i.countLabel}," (",null===(n=r.acknowledges)||void 0===n?void 0:n.length,")")))},or=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),ar=function(){return(ar=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},ir=function(e){function t(t){var n=e.call(this,t)||this;return n.setRootRef=function(e){n.rootRef=e},n.handleProblemAck=function(e,t){return n.props.onProblemAck(e,t)},n.handlePageSizeChange=function(e,t){n.props.onPageSizeChange&&n.props.onPageSizeChange(e,t)},n.handleResizedChange=function(e,t){n.props.onColumnResize&&n.props.onColumnResize(e)},n.handleExpandedChange=function(e){var t=ar({},n.state.expanded);t[n.state.page]=e,n.setState({expanded:t})},n.handleTagClick=function(e,t,r,o){n.props.onTagClick&&n.props.onTagClick(e,t,r,o)},n.getExpandedPage=function(e){return n.state.expanded[e]||{}},n.state={expanded:{},page:0},n}return or(t,e),t.prototype.buildColumns=function(){for(var e=this,t=[],n=this.props.panelOptions,r=n.highlightNewEvents&&n.highlightNewerThan,a=0,i=[{Header:"Host",id:"host",show:n.hostField,Cell:function(e){return o.a.createElement(sr,{name:e.original.host,maintenance:e.original.maintenance})}},{Header:"Host (Technical Name)",id:"hostTechName",show:n.hostTechNameField,Cell:function(e){return o.a.createElement(sr,{name:e.original.hostTechName,maintenance:e.original.maintenance})}},{Header:"Host Groups",accessor:"groups",show:n.hostGroups,Cell:ur},{Header:"Proxy",accessor:"proxy",show:n.hostProxy},{Header:"Severity",show:n.severityField,className:"problem-severity",width:120,accessor:function(e){return e.priority},id:"severity",Cell:function(e){return function(e,t,n,r,a){void 0===a&&(a=lr);var i,s,c=e.original,u=Number(c.severity);s=l.a.find(t,(function(e){return e.priority===u})),c.severity&&"1"===c.value&&(s=l.a.find(t,(function(e){return e.priority===u})));i="0"===c.value?a:s.color,n&&"1"===c.acknowledged&&(i=r);return o.a.createElement("div",{className:"severity-cell",style:{background:i}},s.severity)}(e,n.triggerSeverity,n.markAckEvents,n.ackEventColor,n.okEventColor)}},{Header:"",id:"statusIcon",show:n.statusIcon,className:"problem-status-icon",width:50,accessor:"value",Cell:function(e){return function(e,t){var n="0"===e.value?"ok":"problem",r=!1;t&&(r=Object(Z.c)(e.original,t));var a=v()("zbx-problem-status-icon",{"problem-status--new":r},{"zbx-problem":"1"===e.value},{"zbx-ok":"0"===e.value});return o.a.createElement(an,{status:n,className:a})}(e,r)}},{Header:"Status",accessor:"value",show:n.statusField,width:100,Cell:function(e){return function(e,t){var n="0"===e.value?"RESOLVED":"PROBLEM",r="0"===e.value?lr:cr,a=!1;t&&(a=Object(Z.c)(e.original,t));return o.a.createElement("span",{className:a?"problem-status--new":"",style:{color:r}},n)}(e,r)}},{Header:"Problem",accessor:"description",minWidth:200,Cell:pr},{Header:"Ack",id:"ack",show:n.ackField,width:70,Cell:function(e){return o.a.createElement(rr,ar({},e))}},{Header:"Tags",accessor:"tags",show:n.showTags,className:"problem-tags",Cell:function(t){return o.a.createElement(dr,ar({},t,{onTagClick:e.handleTagClick}))}},{Header:"Age",className:"problem-age",width:100,show:n.ageField,accessor:"timestamp",id:"age",Cell:fr},{Header:"Time",className:"last-change",width:150,accessor:"timestamp",id:"lastchange",Cell:function(e){return function(e,t){var n=e.original,r=X.a.unix(n.timestamp),a=t||"DD MMM YYYY HH:mm:ss",i=r.format(a);return o.a.createElement("span",null,i)}(e,n.customLastChangeFormat&&n.lastChangeFormat)}},{Header:"",className:"custom-expander",width:60,expander:!0,Expander:mr}];a<i.length;a++){var s=i[a];(s.show||void 0===s.show)&&(delete s.show,t.push(s))}return t},t.prototype.render=function(){var e,t=this,n=this.buildColumns();this.rootWidth=this.rootRef&&this.rootRef.clientWidth;var r=this.props,a=r.pageSize,i=r.fontSize,s=r.panelOptions,c=v()("panel-problems",((e={})["font-size--"+i]=i,e)),u=[5,10,20,25,50,100];return a&&(u.push(a),u=l.a.uniq(l.a.sortBy(u))),o.a.createElement("div",{className:c,ref:this.setRootRef},o.a.createElement(Y,{data:this.props.problems,columns:n,defaultPageSize:10,pageSize:a,pageSizeOptions:u,resized:s.resizedColumns,minRows:0,loading:this.props.loading,noDataText:"No problems found",SubComponent:function(e){return o.a.createElement(Yn,ar({},e,{rootWidth:t.rootWidth,timeRange:t.props.timeRange,showTimeline:s.problemTimeline,panelId:t.props.panelId,getProblemEvents:t.props.getProblemEvents,getProblemAlerts:t.props.getProblemAlerts,onProblemAck:t.handleProblemAck,onTagClick:t.handleTagClick,subRows:!1}))},expanded:this.getExpandedPage(this.state.page),onExpandedChange:this.handleExpandedChange,onPageChange:function(e){return t.setState({page:e})},onPageSizeChange:this.handlePageSizeChange,onResizedChange:this.handleResizedChange}))},t}(r.PureComponent),sr=function(e){var t=e.name,n=e.maintenance;return o.a.createElement("div",null,o.a.createElement("span",{style:{paddingRight:"0.4rem"}},t),n&&o.a.createElement(sn,{customClass:"fired",icon:"wrench"}))};var lr="rgb(56, 189, 113)",cr="rgb(215, 0, 0)";function ur(e){var t="";return e.value&&e.value.length&&(t=e.value.map((function(e){return e.name})).join(", ")),o.a.createElement("span",null,t)}function pr(e){e.original.comments;return o.a.createElement("div",null,o.a.createElement("span",{className:"problem-description"},e.value))}function fr(e){var t=e.original,n=X.a.unix(t.timestamp).fromNow(!0);return o.a.createElement("span",null,n)}var dr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTagClick=function(e,n,r){t.props.onTagClick&&t.props.onTagClick(e,t.props.original.datasource,n,r)},t}return or(t,e),t.prototype.render=function(){var e=this;return[(this.props.value||[]).map((function(t){return o.a.createElement(nn,{key:t.tag+t.value,tag:t,onClick:e.handleTagClick})}))]},t}(r.PureComponent);function mr(e){return o.a.createElement("span",{className:e.isExpanded?"expanded":""},o.a.createElement("i",{className:"fa fa-info-circle"}))}var hr,gr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),vr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t}return gr(t,e),t.prototype.render=function(){var e=this.props.problem,t=e.acknowledges&&e.acknowledges.map((function(e){return o.a.createElement("tr",{key:e.acknowledgeid},o.a.createElement("td",null,e.time),o.a.createElement("td",null,e.user),o.a.createElement("td",null,e.message))}));return o.a.createElement("div",{className:"ack-tooltip"},o.a.createElement("table",{className:"table"},o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"ack-time"},"Time"),o.a.createElement("th",{className:"ack-user"},"User"),o.a.createElement("th",{className:"ack-comments"},"Comments"))),o.a.createElement("tbody",null,t)),e.showAckButton&&o.a.createElement("div",{className:"ack-add-button"},o.a.createElement("button",{id:"add-acknowledge-btn",className:"btn btn-mini btn-inverse gf-form-button",onClick:this.handleClick},o.a.createElement("i",{className:"fa fa-plus"}))))},t}(r.PureComponent),yr=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},br=function(e){var t=e.problem,n=e.color,r=e.blink,a=e.highlightBackground,i=Number(t.severity),s="1"===t.value&&i>=2?"critical":"online",l=Object(Q.cx)("icon-gf",r&&"zabbix-trigger--blinked"),c=Object(Q.cx)("alert-rule-item__icon",!a&&Object(Q.css)(hr||(hr=yr(["color: ",""],["color: ",""])),n));return o.a.createElement("div",{className:c},o.a.createElement(an,{status:s,className:l}))},Er=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),wr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleTagClick=function(e,n,r){t.props.onTagClick&&t.props.onTagClick(e,t.props.problem.datasource,n,r)},t.ackProblem=function(e){var n=t.props.problem;return t.props.onProblemAck(n,e)},t}return Er(t,e),t.prototype.render=function(){var e,t=this,n=this.props,r=n.problem,a=n.panelOptions,i=a.targets&&a.targets.length>1,s=v()("alert-rule-item","zbx-trigger-card",{"zbx-trigger-highlighted":a.highlightBackground}),c=v()("alert-rule-item__text",{"zbx-description--newline":a.descriptionAtNewLine}),u=Number(r.severity);e=l.a.find(a.triggerSeverity,(function(e){return e.priority===u})),r.severity&&(e=l.a.find(a.triggerSeverity,(function(e){return e.priority===u})));var p=Object(Z.a)(r.timestamp,a.customLastChangeFormat&&a.lastChangeFormat),f=X.a.unix(r.timestamp).fromNow(!0),d=!1;a.highlightNewerThan&&(d=Object(Z.c)(r,a.highlightNewerThan));var m,h=a.highlightNewEvents&&d;m="0"===r.value?a.okEventColor:a.markAckEvents&&"1"===r.acknowledged?a.ackEventColor:e.color;var g={};return a.highlightBackground&&(g.backgroundColor=m),o.a.createElement("li",{className:s,style:g},o.a.createElement(br,{problem:r,color:m,highlightBackground:a.highlightBackground,blink:h}),o.a.createElement("div",{className:"alert-rule-item__body"},o.a.createElement("div",{className:"alert-rule-item__header"},o.a.createElement("div",{className:"alert-rule-item__name"},o.a.createElement("span",{className:"zabbix-trigger-name"},r.description),(a.hostField||a.hostTechNameField)&&o.a.createElement(Pr,{problem:r,panelOptions:a}),a.hostGroups&&o.a.createElement(xr,{problem:r,panelOptions:a}),a.showTags&&o.a.createElement("span",{className:"zbx-trigger-tags"},r.tags&&r.tags.map((function(e){return o.a.createElement(nn,{key:e.tag+e.value,tag:e,highlight:e.tag===r.correlation_tag,onClick:t.handleTagClick})})))),o.a.createElement("div",{className:c},a.statusField&&o.a.createElement(Cr,{problem:r,blink:h}),a.severityField&&o.a.createElement(Or,{severityDesc:e,blink:h,highlightBackground:a.highlightBackground}),o.a.createElement("span",{className:"alert-rule-item__time"},a.ageField&&"for "+f),a.descriptionField&&!a.descriptionAtNewLine&&o.a.createElement("span",{className:"zbx-description",dangerouslySetInnerHTML:{__html:r.comments}})),a.descriptionField&&a.descriptionAtNewLine&&o.a.createElement("div",{className:"alert-rule-item__text zbx-description--newline"},o.a.createElement("span",{className:"alert-rule-item__info zbx-description",dangerouslySetInnerHTML:{__html:r.comments}})))),i&&o.a.createElement("div",{className:"alert-rule-item__time zabbix-trigger-source"},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-database"}),r.datasource)),o.a.createElement("div",{className:"alert-rule-item__time zbx-trigger-lastchange"},o.a.createElement("span",null,p||"last change unknown"),o.a.createElement("div",{className:"trigger-info-block zbx-status-icons"},r.url&&o.a.createElement("a",{href:r.url,target:"_blank"},o.a.createElement("i",{className:"fa fa-external-link"})),"1"===r.state&&o.a.createElement(It,{placement:"bottom",content:r.error},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-question-circle"}))),r.eventid&&o.a.createElement(Pn,null,(function(e){var n=e.showModal,a=e.hideModal;return o.a.createElement(Sr,{problem:r,onClick:function(){n(jn,{canClose:"1"===r.manual_close,severity:u,onSubmit:t.ackProblem,onDismiss:a})}})})))))},t}(r.PureComponent);function Pr(e){var t=e.problem,n=e.panelOptions,r="";return n.hostField&&n.hostTechNameField?r=t.host+" ("+t.hostTechName+")":(n.hostField||n.hostTechNameField)&&(r=n.hostField?t.host:t.hostTechName),n.hostProxy&&t.proxy&&(r=t.proxy+": "+r),o.a.createElement("span",{className:"zabbix-hostname"},t.maintenance&&o.a.createElement("i",{className:"fa fa-wrench zbx-maintenance-icon"}),r)}function xr(e){var t=e.problem,n="";e.panelOptions.hostGroups&&(n+="[ "+l.a.map(t.groups,"name").join(", ")+" ]");return o.a.createElement("span",{className:"zabbix-hostname"},n)}function Cr(e){var t=e.problem,n=e.okColor,r=e.problemColor,a=e.blink,i="0"===t.value?"RESOLVED":"PROBLEM",s=(t.value,v()("zbx-trigger-state",{"alert-state-critical":"1"===t.value},{"alert-state-ok":"0"===t.value},{"zabbix-trigger--blinked":a}));return o.a.createElement("span",{className:s},i)}function Or(e){var t=e.severityDesc,n=e.highlightBackground,r=e.blink,a=v()("zbx-trigger-severity",{"zabbix-trigger--blinked":r}),i={};return n||(i.color=t.color),o.a.createElement("span",{className:a,style:i},t.severity)}var Sr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){t.props.onClick(e)},t.renderTooltipContent=function(){return o.a.createElement(vr,{problem:t.props.problem,onClick:t.handleClick})},t}return Er(t,e),t.prototype.render=function(){var e=this.props.problem,t=null;return e.acknowledges&&e.acknowledges.length?t=o.a.createElement(It,{placement:"bottom",popperClassName:"ack-tooltip",content:this.renderTooltipContent},o.a.createElement("span",null,o.a.createElement("i",{className:"fa fa-comments"}))):e.showAckButton&&(t=o.a.createElement(It,{placement:"bottom",content:"Acknowledge problem"},o.a.createElement("span",{role:"button",onClick:this.handleClick},o.a.createElement("i",{className:"fa fa-comments-o"})))),t},t}(r.PureComponent),kr=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nr=function(e){function t(t){var n=e.call(this,t)||this;return n.handlePageChange=function(e){var t=n.getCurrentProblems(e);n.setState({page:e,currentProblems:t})},n.handleTagClick=function(e,t,r,o){n.props.onTagClick&&n.props.onTagClick(e,t,r,o)},n.handleProblemAck=function(e,t){return n.props.onProblemAck(e,t)},n.state={page:0,currentProblems:n.getCurrentProblems(0)},n}return kr(t,e),t.prototype.getCurrentProblems=function(e){var t=this.props,n=t.pageSize,r=t.problems,o=n*e,a=Math.min(n*(e+1),r.length);return this.props.problems.slice(o,a)},t.prototype.render=function(){var e,t=this,n=this.props,r=n.problems,a=n.panelOptions,i=this.getCurrentProblems(this.state.page),s=parseInt(a.fontSize.slice(0,a.fontSize.length-1),10);s=s&&100!==s?s:null;var l=v()("alert-rule-list",((e={})["font-size--"+s]=s,e));return o.a.createElement("div",{className:"triggers-panel-container",key:"alertListContainer"},o.a.createElement("section",{className:"card-section card-list-layout-list"},o.a.createElement("ol",{className:l},i.map((function(e){return o.a.createElement(wr,{key:e.triggerid+"-"+e.eventid+"-"+e.datasource,problem:e,panelOptions:a,onTagClick:t.handleTagClick,onProblemAck:t.handleProblemAck})})))),o.a.createElement("div",{className:"triggers-panel-footer",key:"alertListFooter"},o.a.createElement(Tr,{itemsLength:r.length,pageSize:this.props.pageSize,pageIndex:this.state.page,onPageChange:this.handlePageChange})))},t}(r.PureComponent),Tr=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.handlePageChange=function(e){return function(){t.props.onPageChange(e)}},t}return kr(t,e),t.prototype.render=function(){var e=this.props,t=e.itemsLength,n=e.pageIndex,r=e.pageSize,a=Math.ceil(t/r);if(1===a)return o.a.createElement("ul",null);for(var i=Math.max(n-3,0),s=Math.min(a,i+9),l=[],c=i;c<s;c++){var u=v()("triggers-panel-page-link","pointer",{active:c===n}),p=c+1,f=o.a.createElement("li",{key:p.toString()},o.a.createElement("a",{className:u,onClick:this.handlePageChange(c)},p));l.push(f)}return o.a.createElement("ul",null,l)},t}(r.PureComponent),_r=function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dr=[{priority:0,severity:"Not classified",color:"rgb(108, 108, 108)",show:!0},{priority:1,severity:"Information",color:"rgb(120, 158, 183)",show:!0},{priority:2,severity:"Warning",color:"rgb(175, 180, 36)",show:!0},{priority:3,severity:"Average",color:"rgb(255, 137, 30)",show:!0},{priority:4,severity:"High",color:"rgb(255, 101, 72)",show:!0},{priority:5,severity:"Disaster",color:"rgb(215, 0, 0)",show:!0}],jr="DD MMM YYYY HH:mm:ss",zr={schemaVersion:h.a,hostField:!0,hostTechNameField:!1,hostProxy:!1,hostGroups:!1,showTags:!0,statusField:!0,statusIcon:!1,severityField:!0,ackField:!0,ageField:!1,descriptionField:!0,descriptionAtNewLine:!1,sortProblems:"lastchange",limit:null,layout:"table",fontSize:"100%",pageSize:10,problemTimeline:!0,highlightBackground:!1,highlightNewEvents:!1,highlightNewerThan:"1h",customLastChangeFormat:!1,lastChangeFormat:"",resizedColumns:[],triggerSeverity:Dr,okEventColor:"rgb(56, 189, 113)",ackEventColor:"rgb(56, 219, 156)",markAckEvents:!1},Rr={0:"OK",1:"PROBLEM"},Mr=function(e){function t(t,n,r){var o=e.call(this,t,n)||this;return o.scope=t,o.$timeout=r,o.useDataFrames=!0,o.triggerStatusMap=Rr,o.defaultTimeFormat=jr,o.pageIndex=0,o.range={},o.renderData=[],o.panel=Object(h.b)(o.panel),l.a.defaultsDeep(o.panel,l.a.cloneDeep(zr)),o.events.on("data-frames-received",o.onDataFramesReceived.bind(o)),o.events.on(u.PanelEvents.dataSnapshotLoad,o.onDataSnapshotLoad.bind(o)),o.events.on(u.PanelEvents.editModeInitialized,o.onInitEditMode.bind(o)),o}return t.$inject=["$scope","$injector","$timeout"],_r(t,e),t.prototype.onInitEditMode=function(){this.panel.schemaVersion=h.a,this.addEditorTab("Options",m)},t.prototype.onDataFramesReceived=function(e){this.range=this.timeSrv.timeRange();var t=[];if(e&&e.length)for(var n=0,r=e;n<r.length;n++){var o=r[n];try{var a=o.fields[0].values;a.toArray?t.push(a.toArray()):a.length>0&&t.push(a)}catch(e){return console.log(e),Promise.reject(e)}}return this.loading=!1,t=l.a.flatten(t),this.problems=t,this.renderProblems(t)},t.prototype.onDataSnapshotLoad=function(e){return this.onDataFramesReceived(e)},t.prototype.reRenderProblems=function(){this.problems&&this.renderProblems(this.problems)},t.prototype.setPanelError=function(e,t){void 0===t&&(t="Request Error"),this.inspector={error:e},this.error=e.message||t,e.data&&(e.data.message&&(this.error=e.data.message),e.data.error&&(this.error=e.data.error)),console.log("Panel data error:",e)},t.prototype.renderProblems=function(t){var n=this,r=l.a.cloneDeep(t);return r=l.a.map(r,this.formatTrigger.bind(this)),r=this.filterProblems(r),r=this.sortTriggers(r),this.renderData=r,this.$timeout((function(){return e.prototype.render.call(n,r)}))},t.prototype.filterProblems=function(e){var t=this,n=l.a.cloneDeep(e);return"unacknowledged"===this.panel.showTriggers?n=l.a.filter(n,(function(e){return!(e.acknowledges&&e.acknowledges.length)})):"acknowledged"===this.panel.showTriggers&&(n=l.a.filter(n,(function(e){return e.acknowledges&&e.acknowledges.length}))),n=l.a.filter(n,(function(e){return e.severity?t.panel.triggerSeverity[e.severity].show:t.panel.triggerSeverity[e.priority].show}))},t.prototype.sortTriggers=function(e){return"priority"===this.panel.sortProblems?e=l.a.orderBy(e,["priority","lastchangeUnix","triggerid"],["desc","desc","desc"]):"lastchange"===this.panel.sortProblems&&(e=l.a.orderBy(e,["lastchangeUnix","priority","triggerid"],["desc","desc","desc"])),e},t.prototype.formatTrigger=function(e){var t=l.a.cloneDeep(e);if(t.hosts&&t.hosts.length){var n=t.hosts[0];t.host=n.name,t.hostTechName=n.host,n.proxy&&(t.proxy=n.proxy)}return t.tags&&0===t.tags.length&&(t.tags=null),t.comments&&(t.comments=t.comments.replace("\n","<br>")),t.lastchangeUnix=Number(t.lastchange),t},t.prototype.parseTags=function(e){if(!e)return[];var t=l.a.map(e.split(","),(function(e){return e.trim()}));return t=l.a.map(t,(function(e){var t=e.split(":");return{tag:t[0].trim(),value:t[1].trim()}}))},t.prototype.tagsToString=function(e){return l.a.map(e,(function(e){return e.tag+":"+e.value})).join(", ")},t.prototype.addTagFilter=function(e,t){for(var n=0,r=this.panel.targets;n<r.length;n++){var o=r[n];if(o.datasource===t||this.panel.datasource===t){var a=o.tags.filter,i=this.parseTags(a),s={tag:e.tag,value:e.value};i.push(s),i=l.a.uniqWith(i,l.a.isEqual);var c=this.tagsToString(i);o.tags.filter=c}}this.refresh()},t.prototype.removeTagFilter=function(e,t){for(var n=function(t){return t.tag===e.tag&&t.value===e.value},r=0,o=this.panel.targets;r<o.length;r++){var a=o[r];if(a.datasource===t||this.panel.datasource===t){var i=a.tags.filter,s=this.parseTags(i);l.a.remove(s,n),s=l.a.uniqWith(s,l.a.isEqual);var c=this.tagsToString(s);a.tags.filter=c}}this.refresh()},t.prototype.getProblemEvents=function(e){var t=[e.triggerid],n=Math.ceil(p.parse(this.range.from)/1e3),r=Math.ceil(p.parse(this.range.to)/1e3);return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){return e.zabbix.getEvents(t,n,r,[0,1],100)}))},t.prototype.getProblemAlerts=function(e){if(!e.eventid)return Promise.resolve([]);var t=[e.eventid];return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){return e.zabbix.getEventAlerts(t)}))},t.prototype.getAlertIconClassBySeverity=function(e){var t="icon-gf-online";return e.priority>=2&&(t="icon-gf-critical"),t},t.prototype.resetResizedColumns=function(){this.panel.resizedColumns=[],this.render()},t.prototype.acknowledgeProblem=function(e,t,n,r){var o=this,a=e.eventid,i=this.contextSrv.user.name+" (Grafana): "+t;return Object(c.getDataSourceSrv)().get(e.datasource).then((function(e){var t=o.contextSrv.isEditor||o.contextSrv.isGrafanaAdmin;return e.disableReadOnlyUsersAck&&!t?Promise.reject({message:"You have no permissions to acknowledge events."}):a?e.zabbix.acknowledgeEvent(a,i,n,r):Promise.reject({message:"Trigger has no events. Nothing to acknowledge."})})).then(this.refresh.bind(this)).catch((function(e){return o.setPanelError(e),Promise.reject(e)}))},t.prototype.handlePageSizeChange=function(e,t){var n=this;this.panel.pageSize=e,this.pageIndex=t,this.scope.$apply((function(){n.render()}))},t.prototype.handleColumnResize=function(e){var t=this;this.panel.resizedColumns=e,this.scope.$apply((function(){t.render()}))},t.prototype.link=function(e,t,n,r){var a=this,s=r.panel;r.events.on(u.PanelEvents.render,(function(e){!function(e){var n=Math.ceil(p.parse(r.range.from)/1e3),a=Math.ceil(p.parse(r.range.to)/1e3),l=parseInt(s.fontSize.slice(0,s.fontSize.length-1),10),c=l&&100!==l?l:null,u=s.pageSize||10,f=r.loading&&(!e||!e.length),d={};for(var m in zr)d[m]=r.panel[m];var h,g={problems:e,panelOptions:d,timeRange:{timeFrom:n,timeTo:a},loading:f,pageSize:u,fontSize:c,panelId:r.panel.id,getProblemEvents:r.getProblemEvents.bind(r),getProblemAlerts:r.getProblemAlerts.bind(r),onPageSizeChange:r.handlePageSizeChange.bind(r),onColumnResize:r.handleColumnResize.bind(r),onProblemAck:function(e,t){var n=t.message,o=t.action,a=t.severity;return r.acknowledgeProblem(e,n,o,a)},onTagClick:function(e,t,n,o){n||o?r.removeTagFilter(e,t):r.addTagFilter(e,t)}};h="list"===s.layout?o.a.createElement(Nr,g):o.a.createElement(ir,g);var v=t.find(".panel-content");v&&v.length?i.a.render(h,v[0]):i.a.render(h,t[0])}(e=e||a.renderData)}))},t}(f.MetricsPanelCtrl);Mr.templateUrl="public/plugins/alexanderzobnin-zabbix-app/panel-triggers/partials/module.html",n.d(t,"PanelCtrl",(function(){return Mr})),Object(f.loadPluginCss)({dark:"plugins/alexanderzobnin-zabbix-app/css/grafana-zabbix.dark.css",light:"plugins/alexanderzobnin-zabbix-app/css/grafana-zabbix.light.css"})}])}));
//# sourceMappingURL=module.js.map